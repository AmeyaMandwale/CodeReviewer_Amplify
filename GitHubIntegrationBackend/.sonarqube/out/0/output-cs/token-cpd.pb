∫ç
uC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Services\SonarQubeService.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Services# +
{ 
public 

class 
SonarQubeService !
{ 
private		 
readonly		 

HttpClient		 #
_httpClient		$ /
;		/ 0
private

 
readonly

 
string

 
_baseUrl

  (
;

( )
public 
SonarQubeService 
(  
IConfiguration  .
config/ 5
)5 6
{ 	
_baseUrl 
= 
config 
[ 
$str 1
]1 2
;2 3
var 
token 
= 
config 
[ 
$str 0
]0 1
;1 2
_httpClient 
= 
new 

HttpClient (
(( )
)) *
;* +
var 
	byteArray 
= 
Encoding $
.$ %
ASCII% *
.* +
GetBytes+ 3
(3 4
$"4 6
{6 7
token7 <
}< =
$str= >
"> ?
)? @
;@ A
_httpClient 
. !
DefaultRequestHeaders -
.- .
Authorization. ;
=< =
new> A%
AuthenticationHeaderValueB [
([ \
$str\ c
,c d
Converte l
.l m
ToBase64Stringm {
({ |
	byteArray	| Ö
)
Ö Ü
)
Ü á
;
á à
} 	
public 
async 
Task 
< 
bool 
> #
IsProjectConnectedAsync  7
(7 8
string8 >

projectKey? I
)I J
{ 	
var 
response 
= 
await  
_httpClient! ,
., -
GetAsync- 5
(5 6
$"6 8
{8 9
_baseUrl9 A
}A B
$strB `
{` a

projectKeya k
}k l
"l m
)m n
;n o
if 
( 
! 
response 
. 
IsSuccessStatusCode -
)- .
return/ 5
false6 ;
;; <
var 
json 
= 
await 
response %
.% &
Content& -
.- .
ReadAsStringAsync. ?
(? @
)@ A
;A B
using 
var 
doc 
= 
JsonDocument (
.( )
Parse) .
(. /
json/ 3
)3 4
;4 5
var 
total 
= 
doc 
. 
RootElement '
.' (
GetProperty( 3
(3 4
$str4 <
)< =
.= >
GetProperty> I
(I J
$strJ Q
)Q R
.R S
GetInt32S [
([ \
)\ ]
;] ^
return 
total 
> 
$num 
; 
}   	
public## 
async## 
Task## 
<## 
List## 
<## 
object## %
>##% &
>##& '"
GetProjectMetricsAsync##( >
(##> ?
string##? E

projectKey##F P
)##P Q
{$$ 	
var%% 
url%% 
=%% 
$"%% 
{%% 
_baseUrl%% !
}%%! "
$str%%" D
{%%D E

projectKey%%E O
}%%O P
$str	%%P û
"
%%û ü
;
%%ü †
var&& 
response&& 
=&& 
await&&  
_httpClient&&! ,
.&&, -
GetAsync&&- 5
(&&5 6
url&&6 9
)&&9 :
;&&: ;
if'' 
('' 
!'' 
response'' 
.'' 
IsSuccessStatusCode'' -
)''- .
return''/ 5
new''6 9
List'': >
<''> ?
object''? E
>''E F
(''F G
)''G H
;''H I
var)) 
json)) 
=)) 
await)) 
response)) %
.))% &
Content))& -
.))- .
ReadAsStringAsync)). ?
())? @
)))@ A
;))A B
using** 
var** 
doc** 
=** 
JsonDocument** (
.**( )
Parse**) .
(**. /
json**/ 3
)**3 4
;**4 5
return,, 
doc,, 
.,, 
RootElement,, "
.,," #
GetProperty,,# .
(,,. /
$str,,/ :
),,: ;
.,,; <
GetProperty,,< G
(,,G H
$str,,H R
),,R S
.-- 
EnumerateArray-- 
(--  
)--  !
... 
Select.. 
(.. 
x.. 
=>.. 
new..  
{// 
Metric00 
=00 
x00 
.00 
GetProperty00 *
(00* +
$str00+ 3
)003 4
.004 5
	GetString005 >
(00> ?
)00? @
,00@ A
Value11 
=11 
x11 
.11 
GetProperty11 )
(11) *
$str11* 1
)111 2
.112 3
	GetString113 <
(11< =
)11= >
}22 
)22 
.22 
Cast22 
<22 
object22 
>22 
(22  
)22  !
.22! "
ToList22" (
(22( )
)22) *
;22* +
}33 	
public66 
async66 
Task66 
<66 
List66 
<66 
object66 %
>66% &
>66& '!
GetProjectIssuesAsync66( =
(66= >
string66> D

projectKey66E O
)66O P
{77 	
var88 
issues88 
=88 
new88 
List88 !
<88! "
object88" (
>88( )
(88) *
)88* +
;88+ ,
int99 
page99 
=99 
$num99 
,99 
pageSize99 "
=99# $
$num99% (
;99( )
bool:: 
hasMore:: 
=:: 
true:: 
;::  
while<< 
(<< 
hasMore<< 
)<< 
{== 
var>> 
url>> 
=>> 
$">> 
{>> 
_baseUrl>> %
}>>% &
$str>>& A
{>>A B

projectKey>>B L
}>>L M
$str>>M Q
{>>Q R
pageSize>>R Z
}>>Z [
$str>>[ ^
{>>^ _
page>>_ c
}>>c d
">>d e
;>>e f
var?? 
response?? 
=?? 
await?? $
_httpClient??% 0
.??0 1
GetAsync??1 9
(??9 :
url??: =
)??= >
;??> ?
if@@ 
(@@ 
!@@ 
response@@ 
.@@ 
IsSuccessStatusCode@@ 1
)@@1 2
break@@3 8
;@@8 9
varBB 
jsonBB 
=BB 
awaitBB  
responseBB! )
.BB) *
ContentBB* 1
.BB1 2
ReadAsStringAsyncBB2 C
(BBC D
)BBD E
;BBE F
usingCC 
varCC 
docCC 
=CC 
JsonDocumentCC  ,
.CC, -
ParseCC- 2
(CC2 3
jsonCC3 7
)CC7 8
;CC8 9
varEE 

issueArrayEE 
=EE  
docEE! $
.EE$ %
RootElementEE% 0
.EE0 1
GetPropertyEE1 <
(EE< =
$strEE= E
)EEE F
.EEF G
EnumerateArrayEEG U
(EEU V
)EEV W
.FF 
SelectFF 
(FF 
iFF 
=>FF  
newFF! $
{GG 
KeyHH 
=HH 
iHH 
.HH  
GetPropertyHH  +
(HH+ ,
$strHH, 1
)HH1 2
.HH2 3
	GetStringHH3 <
(HH< =
)HH= >
,HH> ?
	ComponentII !
=II" #
iII$ %
.II% &
GetPropertyII& 1
(II1 2
$strII2 =
)II= >
.II> ?
	GetStringII? H
(IIH I
)III J
,IIJ K
FilePathJJ  
=JJ! "
iJJ# $
.JJ$ %
GetPropertyJJ% 0
(JJ0 1
$strJJ1 <
)JJ< =
.JJ= >
	GetStringJJ> G
(JJG H
)JJH I
,JJI J
LineKK 
=KK 
iKK  
.KK  !
TryGetPropertyKK! /
(KK/ 0
$strKK0 6
,KK6 7
outKK8 ;
varKK< ?
linePropKK@ H
)KKH I
?KKJ K
linePropKKL T
.KKT U
GetInt32KKU ]
(KK] ^
)KK^ _
:KK` a
(KKb c
intKKc f
?KKf g
)KKg h
nullKKh l
,KKl m
TypeLL 
=LL 
iLL  
.LL  !
GetPropertyLL! ,
(LL, -
$strLL- 3
)LL3 4
.LL4 5
	GetStringLL5 >
(LL> ?
)LL? @
,LL@ A
SeverityMM  
=MM! "
iMM# $
.MM$ %
GetPropertyMM% 0
(MM0 1
$strMM1 ;
)MM; <
.MM< =
	GetStringMM= F
(MMF G
)MMG H
,MMH I
MessageNN 
=NN  !
iNN" #
.NN# $
GetPropertyNN$ /
(NN/ 0
$strNN0 9
)NN9 :
.NN: ;
	GetStringNN; D
(NND E
)NNE F
,NNF G
EffortOO 
=OO  
iOO! "
.OO" #
TryGetPropertyOO# 1
(OO1 2
$strOO2 :
,OO: ;
outOO< ?
varOO@ C

effortPropOOD N
)OON O
?OOP Q

effortPropOOR \
.OO\ ]
	GetStringOO] f
(OOf g
)OOg h
:OOi j
nullOOk o
}PP 
)PP 
.PP 
ToListPP 
(PP 
)PP 
;PP  
issuesRR 
.RR 
AddRangeRR 
(RR  

issueArrayRR  *
)RR* +
;RR+ ,
intTT 
totalTT 
=TT 
docTT 
.TT  
RootElementTT  +
.TT+ ,
GetPropertyTT, 7
(TT7 8
$strTT8 ?
)TT? @
.TT@ A
GetInt32TTA I
(TTI J
)TTJ K
;TTK L
hasMoreUU 
=UU 
issuesUU  
.UU  !
CountUU! &
<UU' (
totalUU) .
;UU. /
pageVV 
++VV 
;VV 
}WW 
returnYY 
issuesYY 
;YY 
}ZZ 	
public]] 
async]] 
Task]] 
<]] 
List]] 
<]] 
object]] %
>]]% &
>]]& '$
GetFileDuplicationsAsync]]( @
(]]@ A
string]]A G

projectKey]]H R
)]]R S
{^^ 	
var__ 
url__ 
=__ 
$"__ 
{__ 
_baseUrl__ !
}__! "
$str__" I
{__I J

projectKey__J T
}__T U
$str__U d
"__d e
;__e f
var`` 
response`` 
=`` 
await``  
_httpClient``! ,
.``, -
GetAsync``- 5
(``5 6
url``6 9
)``9 :
;``: ;
ifaa 
(aa 
!aa 
responseaa 
.aa 
IsSuccessStatusCodeaa -
)aa- .
returnaa/ 5
newaa6 9
Listaa: >
<aa> ?
objectaa? E
>aaE F
(aaF G
)aaG H
;aaH I
varcc 
jsoncc 
=cc 
awaitcc 
responsecc %
.cc% &
Contentcc& -
.cc- .
ReadAsStringAsynccc. ?
(cc? @
)cc@ A
;ccA B
usingdd 
vardd 
docdd 
=dd 
JsonDocumentdd (
.dd( )
Parsedd) .
(dd. /
jsondd/ 3
)dd3 4
;dd4 5
returnff 
docff 
.ff 
RootElementff "
.ff" #
GetPropertyff# .
(ff. /
$strff/ ;
)ff; <
.gg 
EnumerateArraygg 
(gg  
)gg  !
.hh 
Selecthh 
(hh 
fhh 
=>hh 
newhh  
{ii 
Filejj 
=jj 
fjj 
.jj 
GetPropertyjj (
(jj( )
$strjj) /
)jj/ 0
.jj0 1
	GetStringjj1 :
(jj: ;
)jj; <
,jj< =
Keykk 
=kk 
fkk 
.kk 
GetPropertykk '
(kk' (
$strkk( -
)kk- .
.kk. /
	GetStringkk/ 8
(kk8 9
)kk9 :
,kk: ;
Measuresll 
=ll 
fll  
.ll  !
TryGetPropertyll! /
(ll/ 0
$strll0 :
,ll: ;
outll< ?
varll@ C
mllD E
)llE F
?llG H
mmm 
.mm 
EnumerateArraymm (
(mm( )
)mm) *
.nn 
Wherenn 
(nn  
menn  "
=>nn# %
menn& (
.nn( )
GetPropertynn) 4
(nn4 5
$strnn5 =
)nn= >
.nn> ?
	GetStringnn? H
(nnH I
)nnI J
==nnK M
$strnnN h
)nnh i
.oo 
Selectoo  
(oo  !
meoo! #
=>oo$ &
newoo' *
{pp 
Metricqq #
=qq$ %
meqq& (
.qq( )
GetPropertyqq) 4
(qq4 5
$strqq5 =
)qq= >
.qq> ?
	GetStringqq? H
(qqH I
)qqI J
,qqJ K
Valuerr "
=rr# $
merr% '
.rr' (
GetPropertyrr( 3
(rr3 4
$strrr4 ;
)rr; <
.rr< =
	GetStringrr= F
(rrF G
)rrG H
}ss 
)ss 
.ss 
FirstOrDefaultss *
(ss* +
)ss+ ,
:tt 
nulltt 
}uu 
)uu 
.uu 
Castuu 
<uu 
objectuu 
>uu 
(uu  
)uu  !
.uu! "
ToListuu" (
(uu( )
)uu) *
;uu* +
}vv 	
publicyy 
asyncyy 
Taskyy 
<yy 
Listyy 
<yy 
objectyy %
>yy% &
>yy& '"
GetActivityTrendsAsyncyy( >
(yy> ?
stringyy? E

projectKeyyyF P
)yyP Q
{zz 	
var{{ 
url{{ 
={{ 
$"{{ 
{{{ 
_baseUrl{{ !
}{{! "
$str{{" I
{{{I J

projectKey{{J T
}{{T U
$str	{{U á
"
{{á à
;
{{à â
var|| 
response|| 
=|| 
await||  
_httpClient||! ,
.||, -
GetAsync||- 5
(||5 6
url||6 9
)||9 :
;||: ;
if}} 
(}} 
!}} 
response}} 
.}} 
IsSuccessStatusCode}} -
)}}- .
return}}/ 5
new}}6 9
List}}: >
<}}> ?
object}}? E
>}}E F
(}}F G
)}}G H
;}}H I
var 
json 
= 
await 
response %
.% &
Content& -
.- .
ReadAsStringAsync. ?
(? @
)@ A
;A B
using
ÄÄ 
var
ÄÄ 
doc
ÄÄ 
=
ÄÄ 
JsonDocument
ÄÄ (
.
ÄÄ( )
Parse
ÄÄ) .
(
ÄÄ. /
json
ÄÄ/ 3
)
ÄÄ3 4
;
ÄÄ4 5
return
ÇÇ 
doc
ÇÇ 
.
ÇÇ 
RootElement
ÇÇ "
.
ÇÇ" #
GetProperty
ÇÇ# .
(
ÇÇ. /
$str
ÇÇ/ 9
)
ÇÇ9 :
.
ÉÉ 
EnumerateArray
ÉÉ 
(
ÉÉ  
)
ÉÉ  !
.
ÑÑ 
Select
ÑÑ 
(
ÑÑ 
m
ÑÑ 
=>
ÑÑ 
new
ÑÑ  
{
ÖÖ 
Metric
ÜÜ 
=
ÜÜ 
m
ÜÜ 
.
ÜÜ 
GetProperty
ÜÜ *
(
ÜÜ* +
$str
ÜÜ+ 3
)
ÜÜ3 4
.
ÜÜ4 5
	GetString
ÜÜ5 >
(
ÜÜ> ?
)
ÜÜ? @
,
ÜÜ@ A
History
áá 
=
áá 
m
áá 
.
áá  
GetProperty
áá  +
(
áá+ ,
$str
áá, 5
)
áá5 6
.
àà  
EnumerateArray
àà  .
(
àà. /
)
àà/ 0
.
ââ  
Select
ââ  &
(
ââ& '
h
ââ' (
=>
ââ) +
new
ââ, /
{
ää  
Date
ãã# '
=
ãã( )
h
ãã* +
.
ãã+ ,
GetProperty
ãã, 7
(
ãã7 8
$str
ãã8 >
)
ãã> ?
.
ãã? @
	GetString
ãã@ I
(
ããI J
)
ããJ K
,
ããK L
Value
åå# (
=
åå) *
h
åå+ ,
.
åå, -
GetProperty
åå- 8
(
åå8 9
$str
åå9 @
)
åå@ A
.
ååA B
	GetString
ååB K
(
ååK L
)
ååL M
}
çç  
)
çç  !
.
çç! "
ToList
çç" (
(
çç( )
)
çç) *
}
éé 
)
éé 
.
éé 
Cast
éé 
<
éé 
object
éé 
>
éé 
(
éé  
)
éé  !
.
éé! "
ToList
éé" (
(
éé( )
)
éé) *
;
éé* +
}
èè 	
}
êê 
}ëë Ç4
wC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Services\PullRequestService.cs
public 
class 
PullRequestService 
{ 
private		 
readonly		 
AppDbContext		 !
_context		" *
;		* +
public 

PullRequestService 
( 
AppDbContext *
context+ 2
)2 3
{ 
_context 
= 
context 
; 
} 
public 

async 
Task &
SyncPullRequestsFromGitHub 0
(0 1
int1 4
repoId5 ;
,; <
string= C
rawAccessTokenD R
)R S
{ 
var 
repo 
= 
await 
_context !
.! "
Repositories" .
.. /
	FindAsync/ 8
(8 9
repoId9 ?
)? @
;@ A
if 

( 
repo 
== 
null 
) 
return  
;  !
var 
parts 
= 
repo 
. 
Name 
. 
Split #
(# $
$char$ '
)' (
;( )
if 

( 
parts 
. 
Length 
< 
$num 
) 
return $
;$ %
var 
owner 
= 
parts 
[ 
$num 
] 
; 
var 
repoName 
= 
parts 
[ 
$num 
] 
;  
string 
accessToken 
= 
ParseAccessToken -
(- .
rawAccessToken. <
)< =
;= >
using 
var 
http 
= 
new 

HttpClient '
(' (
)( )
;) *
http   
.   !
DefaultRequestHeaders   "
.  " #
Add  # &
(  & '
$str  ' 6
,  6 7
$"  8 :
$str  : A
{  A B
accessToken  B M
}  M N
"  N O
)  O P
;  P Q
http!! 
.!! !
DefaultRequestHeaders!! "
.!!" #
Add!!# &
(!!& '
$str!!' 3
,!!3 4
$str!!5 :
)!!: ;
;!!; <
var## 
url## 
=## 
$"## 
$str## 1
{##1 2
owner##2 7
}##7 8
$str##8 9
{##9 :
repoName##: B
}##B C
$str##C I
"##I J
;##J K
var%% 
json%% 
=%% 
await%% 
http%% 
.%% 
GetStringAsync%% ,
(%%, -
url%%- 0
)%%0 1
;%%1 2
var'' 
prs'' 
='' 
JsonSerializer''  
.''  !
Deserialize''! ,
<'', -
List''- 1
<''1 2
GithubPRDto''2 =
>''= >
>''> ?
(''? @
json''@ D
)''D E
;''E F
if)) 

()) 
prs)) 
==)) 
null)) 
))) 
return)) 
;))  
foreach++ 
(++ 
var++ 
pr++ 
in++ 
prs++ 
)++ 
{,, 	
var-- 
existing-- 
=-- 
await--  
_context--! )
.--) *
PullRequests--* 6
... 
FirstOrDefaultAsync.. $
(..$ %
x..% &
=>..' )
x..* +
...+ ,

ExternalId.., 6
==..7 9
pr..: <
...< =
id..= ?
...? @
ToString..@ H
(..H I
)..I J
)..J K
;..K L
if00 
(00 
existing00 
==00 
null00  
)00  !
{11 
_context22 
.22 
PullRequests22 %
.22% &
Add22& )
(22) *
new22* -
PullRequest22. 9
{33 
RepoId44 
=44 
repoId44 #
,44# $

ExternalId55 
=55  
pr55! #
.55# $
id55$ &
.55& '
ToString55' /
(55/ 0
)550 1
,551 2
Title66 
=66 
pr66 
.66 
title66 $
,66$ %
AuthorId77 
=77 
pr77 !
.77! "
user77" &
.77& '
id77' )
,77) *
Status88 
=88 
pr88 
.88  
state88  %
,88% &
	CreatedAt99 
=99 
pr99  "
.99" #

created_at99# -
}:: 
):: 
;:: 
};; 
else<< 
{== 
existing>> 
.>> 
Status>> 
=>>  !
pr>>" $
.>>$ %
state>>% *
;>>* +
existing?? 
.?? 
Title?? 
=??  
pr??! #
.??# $
title??$ )
;??) *
existing@@ 
.@@ 
AuthorId@@ !
=@@" #
pr@@$ &
.@@& '
user@@' +
.@@+ ,
id@@, .
;@@. /
}AA 
}BB 	
awaitDD 
_contextDD 
.DD 
SaveChangesAsyncDD '
(DD' (
)DD( )
;DD) *
}EE 
privateJJ 
stringJJ 
ParseAccessTokenJJ #
(JJ# $
stringJJ$ *
tokenStringJJ+ 6
)JJ6 7
{KK 
tryLL 
{MM 	
varNN 
objNN 
=NN 
JsonSerializerNN $
.NN$ %
DeserializeNN% 0
<NN0 1
JsonElementNN1 <
>NN< =
(NN= >
tokenStringNN> I
)NNI J
;NNJ K
ifPP 
(PP 
objPP 
.PP 
TryGetPropertyPP "
(PP" #
$strPP# 1
,PP1 2
outPP3 6
varPP7 :
	tokenPropPP; D
)PPD E
)PPE F
{QQ 
returnRR 
	tokenPropRR  
.RR  !
	GetStringRR! *
(RR* +
)RR+ ,
!RR, -
;RR- .
}SS 
}TT 	
catchUU 
{VV 	
}XX 	
returnYY 
tokenStringYY 
;YY 
}ZZ 
}[[ º,
yC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Services\PullRequestScheduler.cs
public

 
class

  
PullRequestScheduler

 !
:

" #
BackgroundService

$ 5
{ 
private 
readonly 
IServiceProvider %
_serviceProvider& 6
;6 7
private 
readonly 
TimeSpan 
	_interval '
=( )
TimeSpan* 2
.2 3
FromMinutes3 >
(> ?
$num? A
)A B
;B C
public 
 
PullRequestScheduler 
(  
IServiceProvider  0
serviceProvider1 @
)@ A
{ 
_serviceProvider 
= 
serviceProvider *
;* +
} 
	protected 
override 
async 
Task !
ExecuteAsync" .
(. /
CancellationToken/ @
stoppingTokenA N
)N O
{ 
while 
( 
! 
stoppingToken 
. #
IsCancellationRequested 5
)5 6
{ 	
Console 
. 
	WriteLine 
( 
$"  
$str  7
{7 8
DateTime8 @
.@ A
UtcNowA G
}G H
"H I
)I J
;J K
try 
{ 
using 
( 
var 
scope  
=! "
_serviceProvider# 3
.3 4
CreateScope4 ?
(? @
)@ A
)A B
{ 
var 
context 
=  !
scope" '
.' (
ServiceProvider( 7
.7 8
GetRequiredService8 J
<J K
AppDbContextK W
>W X
(X Y
)Y Z
;Z [
var 
	prService !
=" #
scope$ )
.) *
ServiceProvider* 9
.9 :
GetRequiredService: L
<L M
PullRequestServiceM _
>_ `
(` a
)a b
;b c
var!! 
repos!! 
=!! 
await!!  %
context!!& -
.!!- .
Repositories!!. :
.!!: ;
ToListAsync!!; F
(!!F G
stoppingToken!!G T
)!!T U
;!!U V
foreach## 
(## 
var##  
repo##! %
in##& (
repos##) .
)##. /
{$$ 
var&& 
integration&& '
=&&( )
await&&* /
context&&0 7
.&&7 8
Integrations&&8 D
.''  !
Where''! &
(''& '
i''' (
=>'') +
i'', -
.''- .
OrgId''. 3
==''4 6
repo''7 ;
.''; <
OrgId''< A
&&''B D
i''E F
.''F G
Provider''G O
==''P R
repo''S W
.''W X
Provider''X `
)''` a
.((  !
FirstOrDefaultAsync((! 4
(((4 5
stoppingToken((5 B
)((B C
;((C D
if** 
(** 
integration** '
==**( *
null**+ /
)**/ 0
{++ 
Console,, #
.,,# $
	WriteLine,,$ -
(,,- .
$",,. 0
$str,,0 P
{,,P Q
repo,,Q U
.,,U V
Name,,V Z
},,Z [
",,[ \
),,\ ]
;,,] ^
continue-- $
;--$ %
}.. 
string00 
token00 $
=00% &
ExtractAccessToken00' 9
(009 :
integration00: E
.00E F
Config00F L
)00L M
;00M N
await22 
	prService22 '
.22' (&
SyncPullRequestsFromGitHub22( B
(22B C
repo22C G
.22G H
Id22H J
,22J K
token22L Q
)22Q R
;22R S
}33 
}44 
}55 
catch66 
(66 
	Exception66 
ex66 
)66  
{77 
Console88 
.88 
	WriteLine88 !
(88! "
$"88" $
$str88$ 7
{887 8
ex888 :
.88: ;
Message88; B
}88B C
"88C D
)88D E
;88E F
}99 
Console;; 
.;; 
	WriteLine;; 
(;; 
$";;  
$str;;  A
";;A B
);;B C
;;;C D
await<< 
Task<< 
.<< 
Delay<< 
(<< 
	_interval<< &
,<<& '
stoppingToken<<( 5
)<<5 6
;<<6 7
}== 	
}>> 
private@@ 
string@@ 
ExtractAccessToken@@ %
(@@% &
string@@& ,
raw@@- 0
)@@0 1
{AA 
tryBB 
{CC 	
varDD 
docDD 
=DD 
SystemDD 
.DD 
TextDD !
.DD! "
JsonDD" &
.DD& '
JsonDocumentDD' 3
.DD3 4
ParseDD4 9
(DD9 :
rawDD: =
)DD= >
;DD> ?
returnEE 
docEE 
.EE 
RootElementEE "
.EE" #
GetPropertyEE# .
(EE. /
$strEE/ =
)EE= >
.EE> ?
	GetStringEE? H
(EEH I
)EEI J
!EEJ K
;EEK L
}FF 	
catchGG 
{HH 	
returnII 
rawII 
;II 
}JJ 	
}KK 
}LL ›+
tC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Services\PRReviewService.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Services# +
{ 
public 

class 
PRReviewService  
{ 
private		 
readonly		 
AppDbContext		 %
_ctx		& *
;		* +
private

 
readonly

 
PRFileSyncService

 *
_sync

+ 0
;

0 1
private 
readonly 
GeminiService &
_gemini' .
;. /
private 
readonly "
GitHubPRCommentService /
_comment0 8
;8 9
public 
PRReviewService 
( 
AppDbContext 
ctx 
, 
PRFileSyncService 
sync "
," #
GeminiService 
gemini  
,  !"
GitHubPRCommentService "
comment# *
)* +
{ 	
_ctx 
= 
ctx 
; 
_sync 
= 
sync 
; 
_gemini 
= 
gemini 
; 
_comment 
= 
comment 
; 
} 	
public 
async 
Task 
ReviewPR "
(" #
int# &
prId' +
)+ ,
{ 	
var 
pr 
= 
await 
_ctx 
.  
PullRequests  ,
. 
Include 
( 
p 
=> 
p 
.  

Repository  *
)* +
. 
FirstOrDefaultAsync $
($ %
p% &
=>' )
p* +
.+ ,
Id, .
==/ 1
prId2 6
)6 7
;7 8
if!! 
(!! 
pr!! 
==!! 
null!! 
)!! 
throw"" 
new"" 
	Exception"" #
(""# $
$str""$ 4
)""4 5
;""5 6
if$$ 
($$ 
string$$ 
.$$ 
IsNullOrWhiteSpace$$ )
($$) *
pr$$* ,
.$$, -

ExternalId$$- 7
)$$7 8
)$$8 9
throw%% 
new%% 
	Exception%% #
(%%# $
$str%%$ B
)%%B C
;%%C D
var(( 
parts(( 
=(( 
pr(( 
.(( 

Repository(( %
.((% &
Name((& *
.((* +
Split((+ 0
(((0 1
$char((1 4
)((4 5
;((5 6
if)) 
()) 
parts)) 
.)) 
Length)) 
!=)) 
$num))  !
)))! "
throw** 
new** 
	Exception** #
(**# $
$"**$ &
$str**& ;
{**; <
pr**< >
.**> ?

Repository**? I
.**I J
Name**J N
}**N O
"**O P
)**P Q
;**Q R
var,, 
owner,, 
=,, 
parts,, 
[,, 
$num,, 
],,  
;,,  !
var-- 
repo-- 
=-- 
parts-- 
[-- 
$num-- 
]-- 
;--  
var.. 
prNumber.. 
=.. 
int.. 
... 
Parse.. $
(..$ %
pr..% '
...' (

ExternalId..( 2
)..2 3
;..3 4
await11 
_sync11 
.11 
SyncPRFiles11 #
(11# $
prId11$ (
)11( )
;11) *
var44 
files44 
=44 
await44 
_ctx44 "
.44" #
PRFiles44# *
.55 
Where55 
(55 
f55 
=>55 
f55 
.55 
PrId55 "
==55# %
prId55& *
)55* +
.66 
ToListAsync66 
(66 
)66 
;66 
if88 
(88 
!88 
files88 
.88 
Any88 
(88 
)88 
)88 
throw99 
new99 
	Exception99 #
(99# $
$str99$ C
)99C D
;99D E
var<< 
allDiff<< 
=<< 
string<<  
.<<  !
Join<<! %
(<<% &
$str<<& /
,<</ 0
files<<1 6
.<<6 7
Select<<7 =
(<<= >
f<<> ?
=><<@ B
$"== 
$str== 
{== 
f== 
.== 
Path== 
}==  
$str==  "
{==" #
f==# $
.==$ %
Diff==% )
}==) *
"==* +
)>> 
)>> 
;>> 
var@@ 
prompt@@ 
=@@ 
$strAA y
+BB 
allDiffBB 
;BB 
varEE 

aiResponseEE 
=EE 
awaitEE "
_geminiEE# *
.EE* +
GenerateAsyncEE+ 8
(EE8 9
promptEE9 ?
)EE? @
;EE@ A
awaitHH 
_commentHH 
.HH 
PostCommentAsyncHH +
(HH+ ,
ownerHH, 1
,HH1 2
repoHH3 7
,HH7 8
prNumberHH9 A
,HHA B

aiResponseHHC M
)HHM N
;HHN O
}II 	
}JJ 
}KK ô1
vC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Services\PRFileSyncService.cs
public 
class 
PRFileSyncService 
{ 
private 
readonly 
AppDbContext !
_ctx" &
;& '
private		 
readonly		 
GitHubPRFileService		 ( 
_githubPRFileService		) =
;		= >
private

 
readonly

 
GeminiService

 "
_gemini

# *
;

* +
private 
readonly  
GitHubCommentService %
_githubComment& 4
;4 5
public 

PRFileSyncService 
( 
AppDbContext )
ctx* -
,- .
GitHubPRFileService/ B
githubPRFileServiceC V
,V W
GeminiServiceY f
geminig m
,m n 
GitHubCommentService 
githubComment &
)& '
{ 
_ctx 
= 
ctx 
;  
_githubPRFileService 
= 
githubPRFileService 2
;2 3
_gemini	 
= 
gemini 
; 
_githubComment 
= 
githubComment "
;" #
} 
public 

async 
Task 
SyncPRFiles !
(! "
int" %
prId& *
)* +
{ 
var 
pr 
= 
await 
_ctx 
. 
PullRequests (
. 
Include 
( 
p 
=> 
p 
. 

Repository &
)& '
. 
FirstOrDefaultAsync  
(  !
p! "
=># %
p& '
.' (
Id( *
==+ -
prId. 2
)2 3
;3 4
if 

( 
pr 
== 
null 
) 
throw 
new 
	Exception 
(  
$str  :
): ;
;; <
if 

( 
string 
. 
IsNullOrWhiteSpace %
(% &
pr& (
.( )

ExternalId) 3
)3 4
)4 5
throw 
new 
	Exception 
(  
$str  =
)= >
;> ?
var"" 
parts"" 
="" 
pr"" 
."" 

Repository"" !
.""! "
Name""" &
.""& '
Split""' ,
("", -
$char""- 0
)""0 1
;""1 2
if## 

(## 
parts## 
.## 
Length## 
!=## 
$num## 
)## 
throw$$ 
new$$ 
	Exception$$ 
($$  
$"$$  "
$str$$" D
{$$D E
pr$$E G
.$$G H

Repository$$H R
.$$R S
Name$$S W
}$$W X
"$$X Y
)$$Y Z
;$$Z [
var&& 
owner&& 
=&& 
parts&& 
[&& 
$num&& 
]&& 
;&& 
var'' 
repo'' 
='' 
parts'' 
['' 
$num'' 
]'' 
;'' 
var** 
files** 
=** 
await**  
_githubPRFileService** .
.**. /
GetPRFilesAsync**/ >
(**> ?
owner++ 
,++ 
repo,, 
,,, 
pr-- 
.-- 

ExternalId-- 
).. 	
;..	 

var00 
old00 
=00 
_ctx00 
.00 
PRFiles00 
.00 
Where00 $
(00$ %
f00% &
=>00' )
f00* +
.00+ ,
PrId00, 0
==001 3
prId004 8
)008 9
;009 :
_ctx11 
.11 
PRFiles11 
.11 
RemoveRange11  
(11  !
old11! $
)11$ %
;11% &
foreach33 
(33 
var33 
f33 
in33 
files33 
)33  
{44 	
_ctx55 
.55 
PRFiles55 
.55 
Add55 
(55 
new55  
PRFile55! '
{66 
PrId77 
=77 
prId77 
,77 
Path88 
=88 
f88 
.88 
filename88 !
,88! "

ChangeType99 
=99 
f99 
.99 
status99 %
,99% &
Diff:: 
=:: 
f:: 
.:: 
patch:: 
};; 
);; 
;;; 
}<< 	
await>> 
_ctx>> 
.>> 
SaveChangesAsync>> #
(>># $
)>>$ %
;>>% &
varAA 
promptAA 

=AA 
stringAA 
.AA 
JoinAA 
(AA 
$strAA 
,AA  
filesAA! &
.AA& '
SelectAA' -
(AA- .
fAA. /
=>AA0 2
$"BB 
$strBB 
{BB 
fBB 
.BB 
filenameBB 
}BB 
$strBB "
{BB" #
fBB# $
.BB$ %
statusBB% +
}BB+ ,
$strBB, 6
{BB6 7
fBB7 8
.BB8 9
patchBB9 >
}BB> ?
"BB? @
)CC 
)CC 
;CC 
varEE 
analysisEE 
=EE 
awaitEE 
_geminiEE 
.EE 
GenerateAsyncEE *
(EE* +
promptEE+ 1
)EE1 2
;EE2 3
awaitHH 
_githubCommentHH 
.HH 
AddCommentAsyncHH $
(HH$ %
ownerHH% *
,HH* +
repoHH, 0
,HH0 1
prHH2 4
.HH4 5

ExternalIdHH5 ?
!HH? @
,HH@ A
analysisHHB J
)HHJ K
;HHK L
ConsoleJJ 
.JJ 
	WriteLineJJ 
(JJ 
$strJJ 9
)JJ9 :
;JJ: ;
}KK 
}LL ¢O
rC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Services\GitHubService.cs
	namespacexx 	$
GitHubIntegrationBackendxx
 "
.xx" #
Servicesxx# +
{yy 
publiczz 

classzz 
GitHubServicezz 
{{{ 
private|| 
readonly|| 

HttpClient|| #
_client||$ +
;||+ ,
private}} 
readonly}} 
IConfiguration}} '
_config}}( /
;}}/ 0
public 
GitHubService 
( 

HttpClient '
client( .
,. /
IConfiguration0 >
config? E
)E F
{
ÄÄ 	
_client
ÅÅ 
=
ÅÅ 
client
ÅÅ 
;
ÅÅ 
_config
ÇÇ 
=
ÇÇ 
config
ÇÇ 
;
ÇÇ 
_client
ÉÉ 
.
ÉÉ #
DefaultRequestHeaders
ÉÉ )
.
ÉÉ) *
	UserAgent
ÉÉ* 3
.
ÉÉ3 4
Add
ÉÉ4 7
(
ÉÉ7 8
new
ÑÑ $
ProductInfoHeaderValue
ÑÑ *
(
ÑÑ* +
$str
ÑÑ+ 2
,
ÑÑ2 3
$str
ÑÑ4 9
)
ÑÑ9 :
)
ÖÖ 
;
ÖÖ 
}
ÜÜ 	
public
àà 
async
àà 
Task
àà 
<
àà 
string
àà  
?
àà  !
>
àà! "'
ExchangeCodeForTokenAsync
àà# <
(
àà< =
string
àà= C
code
ààD H
)
ààH I
{
ââ 	
var
ää 
request
ää 
=
ää 
new
ää  
HttpRequestMessage
ää 0
(
ää0 1

HttpMethod
ää1 ;
.
ää; <
Post
ää< @
,
ää@ A
$str
ääB o
)
ääo p
;
ääp q
request
ãã 
.
ãã 
Headers
ãã 
.
ãã 
Accept
ãã "
.
ãã" #
Add
ãã# &
(
ãã& '
new
ãã' *-
MediaTypeWithQualityHeaderValue
ãã+ J
(
ããJ K
$str
ããK ]
)
ãã] ^
)
ãã^ _
;
ãã_ `
request
çç 
.
çç 
Content
çç 
=
çç 
new
çç !#
FormUrlEncodedContent
çç" 7
(
çç7 8
new
çç8 ;

Dictionary
çç< F
<
ççF G
string
ççG M
,
ççM N
string
ççO U
>
ççU V
{
éé 
{
èè 
$str
èè 
,
èè 
_config
èè &
[
èè& '
$str
èè' 9
]
èè9 :
}
èè; <
,
èè< =
{
êê 
$str
êê !
,
êê! "
_config
êê# *
[
êê* +
$str
êê+ A
]
êêA B
}
êêC D
,
êêD E
{
ëë 
$str
ëë 
,
ëë 
code
ëë 
}
ëë  
}
íí 
)
íí 
;
íí 
var
îî 
resp
îî 
=
îî 
await
îî 
_client
îî $
.
îî$ %
	SendAsync
îî% .
(
îî. /
request
îî/ 6
)
îî6 7
;
îî7 8
resp
ïï 
.
ïï %
EnsureSuccessStatusCode
ïï (
(
ïï( )
)
ïï) *
;
ïï* +
var
óó 
json
óó 
=
óó 
await
óó 
resp
óó !
.
óó! "
Content
óó" )
.
óó) *
ReadAsStringAsync
óó* ;
(
óó; <
)
óó< =
;
óó= >
var
òò 
obj
òò 
=
òò 
JsonSerializer
òò $
.
òò$ %
Deserialize
òò% 0
<
òò0 1

Dictionary
òò1 ;
<
òò; <
string
òò< B
,
òòB C
object
òòD J
>
òòJ K
>
òòK L
(
òòL M
json
òòM Q
)
òòQ R
;
òòR S
return
öö 
obj
öö 
?
öö 
[
öö 
$str
öö &
]
öö& '
?
öö' (
.
öö( )
ToString
öö) 1
(
öö1 2
)
öö2 3
;
öö3 4
}
õõ 	
public
ùù 
async
ùù 
Task
ùù 
<
ùù 
(
ùù 
bool
ùù 
ok
ùù  "
,
ùù" #
string
ùù$ *
body
ùù+ /
,
ùù/ 0
int
ùù1 4
status
ùù5 ;
)
ùù; <
>
ùù< =
GetUserReposAsync
ùù> O
(
ùùO P
string
ùùP V
token
ùùW \
)
ùù\ ]
{
ûû 	
_client
üü 
.
üü #
DefaultRequestHeaders
üü )
.
üü) *
Authorization
üü* 7
=
üü8 9
new
†† '
AuthenticationHeaderValue
†† -
(
††- .
$str
††. 6
,
††6 7
token
††8 =
)
††= >
;
††> ?
_client
¢¢ 
.
¢¢ #
DefaultRequestHeaders
¢¢ )
.
¢¢) *
	UserAgent
¢¢* 3
.
¢¢3 4
Clear
¢¢4 9
(
¢¢9 :
)
¢¢: ;
;
¢¢; <
_client
££ 
.
££ #
DefaultRequestHeaders
££ )
.
££) *
	UserAgent
££* 3
.
££3 4
Add
££4 7
(
££7 8
new
§§ $
ProductInfoHeaderValue
§§ *
(
§§* +
$str
§§+ 2
,
§§2 3
$str
§§4 9
)
§§9 :
)
•• 
;
•• 
var
ßß 
resp
ßß 
=
ßß 
await
ßß 
_client
ßß $
.
ßß$ %
GetAsync
ßß% -
(
ßß- .
$str
ßß. Q
)
ßßQ R
;
ßßR S
var
®® 
body
®® 
=
®® 
await
®® 
resp
®® !
.
®®! "
Content
®®" )
.
®®) *
ReadAsStringAsync
®®* ;
(
®®; <
)
®®< =
;
®®= >
return
©© 
(
©© 
resp
©© 
.
©© !
IsSuccessStatusCode
©© ,
,
©©, -
body
©©. 2
,
©©2 3
(
©©4 5
int
©©5 8
)
©©8 9
resp
©©9 =
.
©©= >

StatusCode
©©> H
)
©©H I
;
©©I J
}
™™ 	
public
¨¨ 
async
¨¨ 
Task
¨¨ 
<
¨¨ 
(
¨¨ 
bool
¨¨ 
ok
¨¨  "
,
¨¨" #
string
¨¨$ *
body
¨¨+ /
,
¨¨/ 0
int
¨¨1 4
status
¨¨5 ;
)
¨¨; <
>
¨¨< = 
CreateWebhookAsync
¨¨> P
(
¨¨P Q
string
≠≠ 
token
≠≠ 
,
≠≠ 
string
ÆÆ 
owner
ÆÆ 
,
ÆÆ 
string
ØØ 
repo
ØØ 
,
ØØ 
string
∞∞ 

webhookUrl
∞∞ 
,
∞∞ 
string
±± 
secret
±± 
)
±± 
{
≤≤ 	
_client
≥≥ 
.
≥≥ #
DefaultRequestHeaders
≥≥ )
.
≥≥) *
Authorization
≥≥* 7
=
≥≥8 9
new
¥¥ '
AuthenticationHeaderValue
¥¥ -
(
¥¥- .
$str
¥¥. 6
,
¥¥6 7
token
¥¥8 =
)
¥¥= >
;
¥¥> ?
_client
∂∂ 
.
∂∂ #
DefaultRequestHeaders
∂∂ )
.
∂∂) *
	UserAgent
∂∂* 3
.
∂∂3 4
Clear
∂∂4 9
(
∂∂9 :
)
∂∂: ;
;
∂∂; <
_client
∑∑ 
.
∑∑ #
DefaultRequestHeaders
∑∑ )
.
∑∑) *
	UserAgent
∑∑* 3
.
∑∑3 4
Add
∑∑4 7
(
∑∑7 8
new
∏∏ $
ProductInfoHeaderValue
∏∏ *
(
∏∏* +
$str
∏∏+ 2
,
∏∏2 3
$str
∏∏4 9
)
∏∏9 :
)
ππ 
;
ππ 
var
ªª 
bodyData
ªª 
=
ªª 
new
ªª 
{
ºº 
name
ΩΩ 
=
ΩΩ 
$str
ΩΩ 
,
ΩΩ 
active
ææ 
=
ææ 
true
ææ 
,
ææ 
events
øø 
=
øø 
new
øø 
[
øø 
]
øø 
{
øø  
$str
øø! '
,
øø' (
$str
øø) 7
}
øø8 9
,
øø9 :
config
¿¿ 
=
¿¿ 
new
¿¿ 
{
¡¡ 
url
¬¬ 
=
¬¬ 

webhookUrl
¬¬ $
,
¬¬$ %
content_type
√√  
=
√√! "
$str
√√# )
,
√√) *
secret
ƒƒ 
}
≈≈ 
}
∆∆ 
;
∆∆ 
var
»» 
req
»» 
=
»» 
new
»»  
HttpRequestMessage
»» ,
(
»», -

HttpMethod
…… 
.
…… 
Post
…… 
,
……  
$"
   
$str
   /
{
  / 0
owner
  0 5
}
  5 6
$str
  6 7
{
  7 8
repo
  8 <
}
  < =
$str
  = C
"
  C D
)
ÀÀ 
;
ÀÀ 
req
ÕÕ 
.
ÕÕ 
Content
ÕÕ 
=
ÕÕ 
new
ÕÕ 
StringContent
ÕÕ +
(
ÕÕ+ ,
JsonSerializer
ÕÕ, :
.
ÕÕ: ;
	Serialize
ÕÕ; D
(
ÕÕD E
bodyData
ÕÕE M
)
ÕÕM N
,
ÕÕN O
System
ŒŒ 
.
ŒŒ 
Text
ŒŒ 
.
ŒŒ 
Encoding
ŒŒ $
.
ŒŒ$ %
UTF8
ŒŒ% )
,
ŒŒ) *
$str
œœ "
)
œœ" #
;
œœ# $
var
—— 
resp
—— 
=
—— 
await
—— 
_client
—— $
.
——$ %
	SendAsync
——% .
(
——. /
req
——/ 2
)
——2 3
;
——3 4
var
““ 
body
““ 
=
““ 
await
““ 
resp
““ !
.
““! "
Content
““" )
.
““) *
ReadAsStringAsync
““* ;
(
““; <
)
““< =
;
““= >
return
‘‘ 
(
‘‘ 
resp
‘‘ 
.
‘‘ !
IsSuccessStatusCode
‘‘ ,
,
‘‘, -
body
‘‘. 2
,
‘‘2 3
(
‘‘4 5
int
‘‘5 8
)
‘‘8 9
resp
‘‘9 =
.
‘‘= >

StatusCode
‘‘> H
)
‘‘H I
;
‘‘I J
}
’’ 	
}÷÷ 
}◊◊ üG
xC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Services\GitHubPRFileService.cs
	namespace'' 	$
GitHubIntegrationBackend''
 "
.''" #
Services''# +
{(( 
public)) 

class)) 
GitHubPRFileService)) $
{** 
private++ 
readonly++ 
AppDbContext++ %
_ctx++& *
;++* +
private,, 
readonly,, 
IHttpClientFactory,, +
_factory,,, 4
;,,4 5
public.. 
GitHubPRFileService.. "
(.." #
AppDbContext..# /
ctx..0 3
,..3 4
IHttpClientFactory..5 G
factory..H O
)..O P
{// 	
_ctx00 
=00 
ctx00 
;00 
_factory11 
=11 
factory11 
;11 
}22 	
public44 
async44 
Task44 
<44 
List44 
<44 
GitHubFileDto44 ,
>44, -
>44- .
GetPRFilesAsync44/ >
(44> ?
string55 
owner55 
,55 
string66 
repo66 
,66 
string77 

externalId77 
)77 
{88 	
var99 
integration99 
=99 
await99 #
_ctx99$ (
.99( )
Integrations99) 5
.:: 
FirstOrDefaultAsync:: $
(::$ %
i::% &
=>::' )
i::* +
.::+ ,
Provider::, 4
==::5 7
$str::8 @
)::@ A
;::A B
if<< 
(<< 
integration<< 
==<< 
null<< #
)<<# $
throw== 
new== 
	Exception== #
(==# $
$str==$ D
)==D E
;==E F
var?? 
token?? 
=?? 
ExtractToken?? $
(??$ %
integration??% 0
.??0 1
Config??1 7
)??7 8
;??8 9
varAA 
httpAA 
=AA 
_factoryAA 
.AA  
CreateClientAA  ,
(AA, -
)AA- .
;AA. /
httpBB 
.BB !
DefaultRequestHeadersBB &
.BB& '
	UserAgentBB' 0
.BB0 1
ParseAddBB1 9
(BB9 :
$strBB: ?
)BB? @
;BB@ A
httpCC 
.CC !
DefaultRequestHeadersCC &
.CC& '
AuthorizationCC' 4
=CC5 6
newDD %
AuthenticationHeaderValueDD -
(DD- .
$strDD. 6
,DD6 7
tokenDD8 =
)DD= >
;DD> ?
varGG 
prNumberGG 
=GG 
awaitGG  %
GetPRNumberFromExternalIdGG! :
(GG: ;
httpGG; ?
,GG? @
ownerGGA F
,GGF G
repoGGH L
,GGL M

externalIdGGN X
)GGX Y
;GGY Z
ifII 
(II 
prNumberII 
==II 
nullII  
)II  !
throwJJ 
newJJ 
	ExceptionJJ #
(JJ# $
$"JJ$ &
$strJJ& P
{JJP Q

externalIdJJQ [
}JJ[ \
"JJ\ ]
)JJ] ^
;JJ^ _
stringMM 
urlMM 
=MM 
$"NN 
$strNN /
{NN/ 0
ownerNN0 5
}NN5 6
$strNN6 7
{NN7 8
repoNN8 <
}NN< =
$strNN= D
{NND E
prNumberNNE M
}NNM N
$strNNN T
"NNT U
;NNU V
ConsolePP 
.PP 
	WriteLinePP 
(PP 
$"PP  
$strPP  &
{PP& '
urlPP' *
}PP* +
"PP+ ,
)PP, -
;PP- .
varRR 
resRR 
=RR 
awaitRR 
httpRR  
.RR  !
GetAsyncRR! )
(RR) *
urlRR* -
)RR- .
;RR. /
resTT 
.TT #
EnsureSuccessStatusCodeTT '
(TT' (
)TT( )
;TT) *
varVV 
jsonVV 
=VV 
awaitVV 
resVV  
.VV  !
ContentVV! (
.VV( )
ReadAsStringAsyncVV) :
(VV: ;
)VV; <
;VV< =
varWW 
filesWW 
=WW 
JsonSerializerWW &
.WW& '
DeserializeWW' 2
<WW2 3
ListWW3 7
<WW7 8
GitHubFileDtoWW8 E
>WWE F
>WWF G
(WWG H
jsonWWH L
)WWL M
;WWM N
returnYY 
filesYY 
??YY 
newYY 
ListYY  $
<YY$ %
GitHubFileDtoYY% 2
>YY2 3
(YY3 4
)YY4 5
;YY5 6
}ZZ 	
private\\ 
async\\ 
Task\\ 
<\\ 
int\\ 
?\\ 
>\\  %
GetPRNumberFromExternalId\\! :
(\\: ;

HttpClient]] 
http]] 
,]] 
string^^ 
owner^^ 
,^^ 
string__ 
repo__ 
,__ 
string`` 

externalId`` 
)`` 
{aa 	
stringbb 
listUrlbb 
=bb 
$"cc 
$strcc /
{cc/ 0
ownercc0 5
}cc5 6
$strcc6 7
{cc7 8
repocc8 <
}cc< =
$strcc= M
"ccM N
;ccN O
Consoleee 
.ee 
	WriteLineee 
(ee 
$"ee  
$stree  &
{ee& '
listUrlee' .
}ee. /
"ee/ 0
)ee0 1
;ee1 2
vargg 
resgg 
=gg 
awaitgg 
httpgg  
.gg  !
GetAsyncgg! )
(gg) *
listUrlgg* 1
)gg1 2
;gg2 3
ifii 
(ii 
!ii 
resii 
.ii 
IsSuccessStatusCodeii (
)ii( )
returnjj 
nulljj 
;jj 
varll 
jsonll 
=ll 
awaitll 
resll  
.ll  !
Contentll! (
.ll( )
ReadAsStringAsyncll) :
(ll: ;
)ll; <
;ll< =
varnn 
prsnn 
=nn 
JsonSerializernn $
.nn$ %
Deserializenn% 0
<nn0 1
Listnn1 5
<nn5 6
GitHubPRListDtonn6 E
>nnE F
>nnF G
(nnG H
jsonnnH L
)nnL M
;nnM N
varpp 
matchpp 
=pp 
prsqq 
?qq 
.qq 
FirstOrDefaultqq #
(qq# $
pqq$ %
=>qq& (
pqq) *
.qq* +
idqq+ -
.qq- .
ToStringqq. 6
(qq6 7
)qq7 8
==qq9 ;

externalIdqq< F
)qqF G
;qqG H
returnss 
matchss 
?ss 
.ss 
numberss  
;ss  !
}tt 	
privatevv 
stringvv 
ExtractTokenvv #
(vv# $
stringvv$ *
configvv+ 1
)vv1 2
{ww 	
tryxx 
{yy 
varzz 
rootzz 
=zz 
JsonDocumentzz '
.zz' (
Parsezz( -
(zz- .
configzz. 4
)zz4 5
;zz5 6
if{{ 
({{ 
root{{ 
.{{ 
RootElement{{ $
.{{$ %
TryGetProperty{{% 3
({{3 4
$str{{4 B
,{{B C
out{{D G
var{{H K
t{{L M
){{M N
){{N O
return|| 
t|| 
.|| 
	GetString|| &
(||& '
)||' (
!||( )
;||) *
}}} 
catch~~ 
{~~ 
}~~ 
return
ÄÄ 
config
ÄÄ 
;
ÄÄ 
}
ÅÅ 	
}
ÇÇ 
public
ÑÑ 

class
ÑÑ 
GitHubFileDto
ÑÑ 
{
ÖÖ 
public
ÜÜ 
string
ÜÜ 
filename
ÜÜ 
{
ÜÜ  
get
ÜÜ! $
;
ÜÜ$ %
set
ÜÜ& )
;
ÜÜ) *
}
ÜÜ+ ,
=
ÜÜ- .
$str
ÜÜ/ 1
;
ÜÜ1 2
public
áá 
string
áá 
status
áá 
{
áá 
get
áá "
;
áá" #
set
áá$ '
;
áá' (
}
áá) *
=
áá+ ,
$str
áá- /
;
áá/ 0
public
àà 
string
àà 
?
àà 
patch
àà 
{
àà 
get
àà "
;
àà" #
set
àà$ '
;
àà' (
}
àà) *
}
ââ 
public
ãã 

class
ãã 
GitHubPRListDto
ãã  
{
åå 
public
çç 
long
çç 
id
çç 
{
çç 
get
çç 
;
çç 
set
çç !
;
çç! "
}
çç# $
public
éé 
int
éé 
number
éé 
{
éé 
get
éé 
;
éé  
set
éé! $
;
éé$ %
}
éé& '
}
èè 
}êê ”$
{C:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Services\GitHubPRCommentService.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Services# +
{		 
public

 

class

 "
GitHubPRCommentService

 '
{ 
private 
readonly 
AppDbContext %
_ctx& *
;* +
private 
readonly 
IHttpClientFactory +
_factory, 4
;4 5
public "
GitHubPRCommentService %
(% &
AppDbContext& 2
ctx3 6
,6 7
IHttpClientFactory8 J
factoryK R
)R S
{ 	
_ctx 
= 
ctx 
; 
_factory 
= 
factory 
; 
} 	
public 
async 
Task 
PostCommentAsync *
(* +
string 
owner 
, 
string 
repo 
, 
int 
prNumber 
, 
string 
comment 
) 
{ 	
var 
integration 
= 
await #
_ctx$ (
.( )
Integrations) 5
. 
FirstOrDefaultAsync $
($ %
i% &
=>' )
i* +
.+ ,
Provider, 4
==5 7
$str8 @
)@ A
;A B
if 
( 
integration 
== 
null #
)# $
throw   
new   
	Exception   #
(  # $
$str  $ D
)  D E
;  E F
string"" 
token"" 
="" 
ExtractToken"" '
(""' (
integration""( 3
.""3 4
Config""4 :
)"": ;
;""; <
var$$ 
http$$ 
=$$ 
_factory$$ 
.$$  
CreateClient$$  ,
($$, -
)$$- .
;$$. /
http%% 
.%% !
DefaultRequestHeaders%% &
.%%& '
	UserAgent%%' 0
.%%0 1
ParseAdd%%1 9
(%%9 :
$str%%: ?
)%%? @
;%%@ A
http&& 
.&& !
DefaultRequestHeaders&& &
.&&& '
Authorization&&' 4
=&&5 6
new'' %
AuthenticationHeaderValue'' -
(''- .
$str''. 6
,''6 7
token''8 =
)''= >
;''> ?
var)) 
body)) 
=)) 
new)) 
{)) 
body)) !
=))" #
comment))$ +
})), -
;))- .
var++ 
json++ 
=++ 
JsonSerializer++ %
.++% &
	Serialize++& /
(++/ 0
body++0 4
)++4 5
;++5 6
var-- 
res-- 
=-- 
await-- 
http--  
.--  !
	PostAsync--! *
(--* +
$".. 
$str.. /
{../ 0
owner..0 5
}..5 6
$str..6 7
{..7 8
repo..8 <
}..< =
$str..= E
{..E F
prNumber..F N
}..N O
$str..O X
"..X Y
,..Y Z
new// 
StringContent// !
(//! "
json//" &
,//& '
Encoding//( 0
.//0 1
UTF8//1 5
,//5 6
$str//7 I
)//I J
)00 
;00 
res22 
.22 #
EnsureSuccessStatusCode22 '
(22' (
)22( )
;22) *
}33 	
private55 
static55 
string55 
ExtractToken55 *
(55* +
string55+ 1
config552 8
)558 9
{66 	
try77 
{88 
using99 
var99 
doc99 
=99 
JsonDocument99  ,
.99, -
Parse99- 2
(992 3
config993 9
)999 :
;99: ;
if:: 
(:: 
doc:: 
.:: 
RootElement:: #
.::# $
TryGetProperty::$ 2
(::2 3
$str::3 A
,::A B
out::C F
var::G J
t::K L
)::L M
)::M N
return;; 
t;; 
.;; 
	GetString;; &
(;;& '
);;' (
!;;( )
;;;) *
}<< 
catch== 
{== 
}== 
return>> 
config>> 
;>> 
}?? 	
}@@ 
}AA ≈"
yC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Services\GitHubCommentService.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Services# +
{ 
public		 

class		  
GitHubCommentService		 %
{

 
private 
readonly 
AppDbContext %
_ctx& *
;* +
private 
readonly 
IHttpClientFactory +
_factory, 4
;4 5
public  
GitHubCommentService #
(# $
AppDbContext$ 0
ctx1 4
,4 5
IHttpClientFactory6 H
factoryI P
)P Q
{ 	
_ctx 
= 
ctx 
; 
_factory 
= 
factory 
; 
} 	
public 
async 
Task 
< 
bool 
> 
AddCommentAsync  /
(/ 0
string0 6
owner7 <
,< =
string> D
repoE I
,I J
stringK Q
prNumberR Z
,Z [
string\ b
commentc j
)j k
{ 	
var 
integration 
= 
await #
_ctx$ (
.( )
Integrations) 5
. 
FirstOrDefaultAsync $
($ %
i% &
=>' )
i* +
.+ ,
Provider, 4
==5 7
$str8 @
)@ A
;A B
if 
( 
integration 
== 
null #
)# $
throw 
new 
	Exception #
(# $
$str$ D
)D E
;E F
var 
token 
= 
ExtractToken $
($ %
integration% 0
.0 1
Config1 7
)7 8
;8 9
var 
http 
= 
_factory 
.  
CreateClient  ,
(, -
)- .
;. /
http 
. !
DefaultRequestHeaders &
.& '
	UserAgent' 0
.0 1
ParseAdd1 9
(9 :
$str: ?
)? @
;@ A
http   
.   !
DefaultRequestHeaders   &
.  & '
Authorization  ' 4
=  5 6
new!! %
AuthenticationHeaderValue!! -
(!!- .
$str!!. 6
,!!6 7
token!!8 =
)!!= >
;!!> ?
string## 
url## 
=## 
$"## 
$str## 8
{##8 9
owner##9 >
}##> ?
$str##? @
{##@ A
repo##A E
}##E F
$str##F N
{##N O
prNumber##O W
}##W X
$str##X a
"##a b
;##b c
var%% 
payload%% 
=%% 
new%% 
{&& 
body'' 
='' 
comment'' 
}(( 
;(( 
var** 
res** 
=** 
await** 
http**  
.**  !
PostAsJsonAsync**! 0
(**0 1
url**1 4
,**4 5
payload**6 =
)**= >
;**> ?
return,, 
res,, 
.,, 
IsSuccessStatusCode,, *
;,,* +
}-- 	
private// 
string// 
ExtractToken// #
(//# $
string//$ *
config//+ 1
)//1 2
{00 	
try11 
{22 
var33 
root33 
=33 
JsonDocument33 '
.33' (
Parse33( -
(33- .
config33. 4
)334 5
;335 6
if44 
(44 
root44 
.44 
RootElement44 $
.44$ %
TryGetProperty44% 3
(443 4
$str444 B
,44B C
out44D G
var44H K
t44L M
)44M N
)44N O
return55 
t55 
.55 
	GetString55 &
(55& '
)55' (
!55( )
;55) *
}66 
catch77 
{77 
}77 
return99 
config99 
;99 
}:: 	
};; 
}<< ¡
rC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Services\GeminiService.cs
	namespace99 	$
GitHubIntegrationBackend99
 "
.99" #
Services99# +
{:: 
public;; 

class;; 
GeminiService;; 
{<< 
private== 
readonly== 

HttpClient== #
_httpClient==$ /
;==/ 0
private>> 
readonly>> 
IConfiguration>> '
_config>>( /
;>>/ 0
private?? 
const?? 
string?? 
Model?? "
=??# $
$str??% 5
;??5 6
publicAA 
GeminiServiceAA 
(AA 
IHttpClientFactoryAA /
factoryAA0 7
,AA7 8
IConfigurationAA9 G
configAAH N
)AAN O
{BB 	
_httpClientCC 
=CC 
factoryCC !
.CC! "
CreateClientCC" .
(CC. /
)CC/ 0
;CC0 1
_configDD 
=DD 
configDD 
;DD 
}EE 	
privateGG 
stringGG 
	GeminiUrlGG  
=>GG! #
$"HH 
$strHH F
{HHF G
ModelHHG L
}HHL M
$str	HHM â
"
HHâ ä
;
HHä ã
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
stringJJ  
>JJ  !
GenerateAsyncJJ" /
(JJ/ 0
stringJJ0 6
promptJJ7 =
,JJ= >
CancellationTokenJJ? P
ctJJQ S
=JJT U
defaultJJV ]
)JJ] ^
{KK 	
varLL 
payloadLL 
=LL 
newLL 
{MM 
contentsNN 
=NN 
newNN 
[NN 
]NN  
{OO 
newPP 
{PP 
partsPP 
=PP  !
newPP" %
[PP% &
]PP& '
{PP( )
newPP* -
{PP. /
textPP0 4
=PP5 6
promptPP7 =
}PP> ?
}PP@ A
}PPB C
}QQ 
}RR 
;RR 
varTT 
responseTT 
=TT 
awaitTT  
_httpClientTT! ,
.TT, -
PostAsJsonAsyncTT- <
(TT< =
	GeminiUrlTT= F
,TTF G
payloadTTH O
,TTO P
ctTTQ S
)TTS T
;TTT U
ifVV 
(VV 
!VV 
responseVV 
.VV 
IsSuccessStatusCodeVV -
)VV- .
returnWW 
$"WW 
$strWW (
{WW( )
responseWW) 1
.WW1 2

StatusCodeWW2 <
}WW< =
"WW= >
;WW> ?
varYY 
jsonYY 
=YY 
awaitYY 
responseYY %
.YY% &
ContentYY& -
.YY- .
ReadAsStringAsyncYY. ?
(YY? @
ctYY@ B
)YYB C
;YYC D
try[[ 
{\\ 
using]] 
var]] 
doc]] 
=]] 
JsonDocument]]  ,
.]], -
Parse]]- 2
(]]2 3
json]]3 7
)]]7 8
;]]8 9
var__ 
text__ 
=__ 
doc`` 
.`` 
RootElement`` #
.``# $
GetProperty``$ /
(``/ 0
$str``0 <
)``< =
[``= >
$num``> ?
]``? @
.aa 
GetPropertyaa $
(aa$ %
$straa% .
)aa. /
.bb 
GetPropertybb $
(bb$ %
$strbb% ,
)bb, -
[bb- .
$numbb. /
]bb/ 0
.cc 
GetPropertycc $
(cc$ %
$strcc% +
)cc+ ,
.dd 
	GetStringdd "
(dd" #
)dd# $
;dd$ %
returnff 
textff 
??ff 
$strff !
;ff! "
}gg 
catchhh 
{ii 
returnjj 
$strjj >
;jj> ?
}kk 
}ll 	
}mm 
}nn É/
wC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Services\ContributorService.cs
public 
class 
ContributorService 
{ 
private		 
readonly		 
AppDbContext		 !
_context		" *
;		* +
public 

ContributorService 
( 
AppDbContext *
context+ 2
)2 3
{ 
_context 
= 
context 
; 
} 
public 

async 
Task &
SyncContributorsFromGitHub 0
(0 1
int1 4
repoId5 ;
,; <
string= C
rawAccessTokenD R
)R S
{ 
var 
repo 
= 
await 
_context !
.! "
Repositories" .
.. /
	FindAsync/ 8
(8 9
repoId9 ?
)? @
;@ A
if 

( 
repo 
== 
null 
) 
return  
;  !
var 
parts 
= 
repo 
. 
Name 
. 
Split #
(# $
$char$ '
)' (
;( )
if 

( 
parts 
. 
Length 
< 
$num 
) 
return $
;$ %
var 
owner 
= 
parts 
[ 
$num 
] 
; 
var 
repoName 
= 
parts 
[ 
$num 
] 
;  
string 
accessToken 
= 
ParseAccessToken -
(- .
rawAccessToken. <
)< =
;= >
using 
var 
http 
= 
new 

HttpClient '
(' (
)( )
;) *
http   
.   !
DefaultRequestHeaders   "
.  " #
Add  # &
(  & '
$str  ' 6
,  6 7
$"  8 :
$str  : A
{  A B
accessToken  B M
}  M N
"  N O
)  O P
;  P Q
http!! 
.!! !
DefaultRequestHeaders!! "
.!!" #
Add!!# &
(!!& '
$str!!' 3
,!!3 4
$str!!5 :
)!!: ;
;!!; <
var## 
url## 
=## 
$"## 
$str## 1
{##1 2
owner##2 7
}##7 8
$str##8 9
{##9 :
repoName##: B
}##B C
$str##C P
"##P Q
;##Q R
var%% 
json%% 
=%% 
await%% 
http%% 
.%% 
GetStringAsync%% ,
(%%, -
url%%- 0
)%%0 1
;%%1 2
var'' 
contributors'' 
='' 
JsonSerializer'' )
.'') *
Deserialize''* 5
<''5 6
List''6 :
<'': ; 
GithubContributorDto''; O
>''O P
>''P Q
(''Q R
json''R V
)''V W
;''W X
if)) 

()) 
contributors)) 
==)) 
null))  
)))  !
return))" (
;))( )
foreach++ 
(++ 
var++ 
c++ 
in++ 
contributors++ &
)++& '
{,, 	
var.. 
existing.. 
=.. 
await..  
_context..! )
...) *
Users..* /
.// 
FirstOrDefaultAsync// $
(//$ %
u//% &
=>//' )
u//* +
.//+ ,
Provider//, 4
==//5 7
repo//8 <
.//< =
Provider//= E
&&//F H
u//I J
.//J K
Email//K P
==//Q S
c//T U
.//U V
login//V [
)//[ \
;//\ ]
if11 
(11 
existing11 
==11 
null11  
)11  !
{22 
_context33 
.33 
Users33 
.33 
Add33 "
(33" #
new33# &
User33' +
{44 
OrgId55 
=55 
repo55  
.55  !
OrgId55! &
,55& '
Email66 
=66 
c66 
.66 
login66 #
,66# $
Provider77 
=77 
repo77 #
.77# $
Provider77$ ,
,77, -
Role88 
=88 
$str88 !
,88! "
Preferences99 
=99  !
null99" &
}:: 
):: 
;:: 
};; 
}== 	
await?? 
_context?? 
.?? 
SaveChangesAsync?? '
(??' (
)??( )
;??) *
}@@ 
privateBB 
stringBB 
ParseAccessTokenBB #
(BB# $
stringBB$ *
tokenStringBB+ 6
)BB6 7
{CC 
tryDD 
{EE 	
varFF 
objFF 
=FF 
JsonSerializerFF $
.FF$ %
DeserializeFF% 0
<FF0 1
JsonElementFF1 <
>FF< =
(FF= >
tokenStringFF> I
)FFI J
;FFJ K
ifHH 
(HH 
objHH 
.HH 
TryGetPropertyHH "
(HH" #
$strHH# 1
,HH1 2
outHH3 6
varHH7 :
	tokenPropHH; D
)HHD E
)HHE F
{II 
returnJJ 
	tokenPropJJ  
.JJ  !
	GetStringJJ! *
(JJ* +
)JJ+ ,
!JJ, -
;JJ- .
}KK 
}LL 	
catchMM 
{NN 	
}PP 	
returnQQ 
tokenStringQQ 
;QQ 
}RR 
}SS ·:
cC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Program.cs
Env 
. 
Load 
( 	
)	 

;
 
var

 
builder

 
=

 
WebApplication

 
.

 
CreateBuilder

 *
(

* +
args

+ /
)

/ 0
;

0 1
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. 
AddCors 
( 
options  
=>! #
{ 
options 
. 
	AddPolicy 
( 
$str %
,% &
policy' -
=>. 0
{ 
policy 
. 
WithOrigins 
( 
$str 0
)0 1
. 
AllowAnyMethod 
( 
) 
. 
AllowAnyHeader 
( 
) 
. 
AllowCredentials 
( 
) 
;  
} 
) 
; 
} 
) 
; 
var 
connectionString 
= 
builder 
. 
Configuration ,
., -
GetConnectionString- @
(@ A
$strA T
)T U
;U V
builder 
. 
Services 
. 
AddDbContext 
< 
AppDbContext *
>* +
(+ ,
options, 3
=>4 6
options 
. 
UseMySql 
( 
connectionString %
,% &
ServerVersion' 4
.4 5

AutoDetect5 ?
(? @
connectionString@ P
)P Q
)Q R
)R S
;S T
builder 
. 
Services 
. 
AddHttpClient 
( 
)  
;  !
builder   
.   
Services   
.   
	AddScoped   
<   
GitHubService   (
>  ( )
(  ) *
)  * +
;  + ,
builder!! 
.!! 
Services!! 
.!! 
	AddScoped!! 
<!! 
SonarQubeService!! +
>!!+ ,
(!!, -
)!!- .
;!!. /
builder"" 
."" 
Services"" 
."" 
	AddScoped"" 
<"" 
GeminiService"" (
>""( )
("") *
)""* +
;""+ ,
builder## 
.## 
Services## 
.## #
AddEndpointsApiExplorer## (
(##( )
)##) *
;##* +
builder$$ 
.$$ 
Services$$ 
.$$ 
AddSwaggerGen$$ 
($$ 
)$$  
;$$  !
builder%% 
.%% 
Services%% 
.%% 
	AddScoped%% 
<%% 
PullRequestService%% -
>%%- .
(%%. /
)%%/ 0
;%%0 1
builder&& 
.&& 
Services&& 
.&& 
AddHostedService&& !
<&&! " 
PullRequestScheduler&&" 6
>&&6 7
(&&7 8
)&&8 9
;&&9 :
builder'' 
.'' 
Services'' 
.'' 
	AddScoped'' 
<'' 
PRReviewService'' *
>''* +
(''+ ,
)'', -
;''- .
builder(( 
.(( 
Services(( 
.(( 
	AddScoped(( 
<(( 
ContributorService(( -
>((- .
(((. /
)((/ 0
;((0 1
builder)) 
.)) 
Services)) 
.)) 
	AddScoped)) 
<)) "
GitHubPRCommentService)) 1
>))1 2
())2 3
)))3 4
;))4 5
builder** 
.** 
Services** 
.** 
	AddScoped** 
<**  
GitHubCommentService** /
>**/ 0
(**0 1
)**1 2
;**2 3
builder++ 
.++ 
Services++ 
.++ 
	AddScoped++ 
<++ 
GitHubPRFileService++ .
>++. /
(++/ 0
)++0 1
;++1 2
builder,, 
.,, 
Services,, 
.,, 
	AddScoped,, 
<,, 
PRFileSyncService,, ,
>,,, -
(,,- .
),,. /
;,,/ 0
var.. 
app.. 
=.. 	
builder..
 
... 
Build.. 
(.. 
).. 
;.. 
if00 
(00 
app00 
.00 
Environment00 
.00 
IsDevelopment00 !
(00! "
)00" #
)00# $
{11 
app22 
.22 %
UseDeveloperExceptionPage22 !
(22! "
)22" #
;22# $
app33 
.33 

UseSwagger33 
(33 
)33 
;33 
app44 
.44 
UseSwaggerUI44 
(44 
)44 
;44 
}55 
app88 
.88 
Use88 
(88 
async88 
(88 
context88 
,88 
next88 
)88 
=>88  
{99 
if:: 
(:: 
context:: 
.:: 
Request:: 
.:: 
Method:: 
==:: !
$str::" +
)::+ ,
{;; 
context<< 
.<< 
Response<< 
.<< 
Headers<<  
.<<  !
Add<<! $
(<<$ %
$str<<% B
,<<B C
$str<<D [
)<<[ \
;<<\ ]
context== 
.== 
Response== 
.== 
Headers==  
.==  !
Add==! $
(==$ %
$str==% C
,==C D
$str==E H
)==H I
;==I J
context>> 
.>> 
Response>> 
.>> 
Headers>>  
.>>  !
Add>>! $
(>>$ %
$str>>% C
,>>C D
$str>>E H
)>>H I
;>>I J
context?? 
.?? 
Response?? 
.?? 
Headers??  
.??  !
Add??! $
(??$ %
$str??% G
,??G H
$str??I O
)??O P
;??P Q
context@@ 
.@@ 
Response@@ 
.@@ 

StatusCode@@ #
=@@$ %
$num@@& )
;@@) *
returnAA 
;AA 
}BB 
awaitDD 	
nextDD
 
(DD 
)DD 
;DD 
}EE 
)EE 
;EE 
appHH 
.HH 

UseRoutingHH 
(HH 
)HH 
;HH 
appII 
.II 
UseCorsII 
(II 
$strII 
)II 
;II 
appJJ 
.JJ 
UseAuthenticationJJ 
(JJ 
)JJ 
;JJ 
appKK 
.KK 
UseAuthorizationKK 
(KK 
)KK 
;KK 
appMM 
.MM 
MapControllersMM 
(MM 
)MM 
;MM 
appOO 
.OO 
RunOO 
(OO 
)OO 	
;OO	 
˛
gC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Models\User.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Models# )
{ 
public 
class 
User 
{		 
[

 	
Key

	 
]

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	

ForeignKey	 
( 
$str "
)" #
]# $
public 
int 
OrgId 
{ 
get 
; 
set  #
;# $
}% &
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
public 
string 
Provider 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
string 
Role 
{ 
get  
;  !
set" %
;% &
}' (
=) *
$str+ 1
;1 2
public 
string 
? 
Preferences "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
Organization 
? 
Organization )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
} 
} ¸
kC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Models\RulePack.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Models# )
{ 
public 
class 
RulePack 
{		 
[

 	
Key

	 
]

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	

ForeignKey	 
( 
$str "
)" #
]# $
public 
int 
OrgId 
{ 
get 
; 
set  #
;# $
}% &
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 
string 
Type 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 
bool 
Enabled 
{ 
get !
;! "
set# &
;& '
}( )
=* +
true, 0
;0 1
public 
string 
? 
Rules 
{ 
get "
;" #
set$ '
;' (
}) *
public 
Organization 
? 
Organization )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
} 
} è
sC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Models\ReviewerFeedback.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Models# )
{ 
public 

class 
ReviewerFeedback !
{		 
[

 	
Key

	 
]

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	

ForeignKey	 
( 
$str $
)$ %
]% &
public 
int 

AnalysisId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
AuthorId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
FilePath 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
int 
LineNum 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
CommentBody !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
string2 8
.8 9
Empty9 >
;> ?
public 
string 
? 
SuggestedFix #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
AnalysisResult 
? 
AnalysisResult -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
} 
} ∂
mC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Models\Repository.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Models# )
{ 
public 

class 

Repository 
{		 
[

 	
Key

	 
]

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	

ForeignKey	 
( 
$str "
)" #
]# $
public 
int 
OrgId 
{ 
get 
; 
set  #
;# $
}% &
public 
string 
Provider 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
string 

ExternalId  
{! "
get# &
;& '
set( +
;+ ,
}- .
=/ 0
string1 7
.7 8
Empty8 =
;= >
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 
DateTime 
? 
LastSyncedAt %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
Organization 
? 
Organization )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
} 
} Ó
nC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Models\PullRequest.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Models# )
{ 
public 

class 
PullRequest 
{		 
[

 	
Key

	 
]

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	

ForeignKey	 
( 
$str  
)  !
]! "
public 
int 
RepoId 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 

ExternalId  
{! "
get# &
;& '
set( +
;+ ,
}- .
=/ 0
string1 7
.7 8
Empty8 =
;= >
public 
string 
Title 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
public 
int 
AuthorId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Status 
{ 
get "
;" #
set$ '
;' (
}) *
=+ ,
$str- 3
;3 4
public 
DateTime 
	CreatedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
DateTime2 :
.: ;
UtcNow; A
;A B
public 

Repository 
? 

Repository %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} 
} ±
iC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Models\PRFile.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Models# )
{ 
public 
class 
PRFile 
{		 
[

 	
Key

	 
]

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	

ForeignKey	 
( 
$str !
)! "
]" #
public 
int 
PrId 
{ 
get 
; 
set "
;" #
}$ %
public 
string 
Path 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 
string 

ChangeType  
{! "
get# &
;& '
set( +
;+ ,
}- .
=/ 0
string1 7
.7 8
Empty8 =
;= >
public 
string 
? 
Diff 
{ 
get !
;! "
set# &
;& '
}( )
public 
PullRequest 
? 
PullRequest '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} Ì
tC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Models\PostReviewRequest.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Models# )
{ 
public 

class 
PostReviewRequest "
{ 
public 
string 
	RepoOwner 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
RepoName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 
PrNumber 
{ 
get !
;! "
set# &
;& '
}( )
public		 
string		 
AccessToken		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
public

 
GeminiResponse

 
GeminiResponse

 ,
{

- .
get

/ 2
;

2 3
set

4 7
;

7 8
}

9 :
} 
} ’
oC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Models\Organization.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Models# )
{ 
public 

class 
Organization 
{		 
[

 	
Key

	 
]

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	
Required	 
] 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 
string 
? 
Settings 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} Œ
rC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Models\LearningJournal.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Models# )
{ 
public		 

class		 
LearningJournal		  
{

 
[ 	
Key	 
] 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	

ForeignKey	 
( 
$str "
)" #
]# $
public 
int 
OrgId 
{ 
get 
; 
set  #
;# $
}% &
[ 	

ForeignKey	 
( 
$str  
)  !
]! "
public 
int 
RepoId 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 

SourceType  
{! "
get# &
;& '
set( +
;+ ,
}- .
=/ 0
string1 7
.7 8
Empty8 =
;= >
public 
string 
PatternRecognized '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
=6 7
string8 >
.> ?
Empty? D
;D E
public 
string 
ModelVersion "
{# $
get% (
;( )
set* -
;- .
}/ 0
=1 2
string3 9
.9 :
Empty: ?
;? @
public 
Organization 
? 
Organization )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 

Repository 
? 

Repository %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} 
} æ
nC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Models\Integration.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Models# )
{ 
public 
class 
Integration 
{		 
[

 	
Key

	 
]

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	

ForeignKey	 
( 
$str "
)" #
]# $
public 
int 
OrgId 
{ 
get 
; 
set  #
;# $
}% &
public 
string 
Type 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 
string 
Provider 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
string 
? 
Config 
{ 
get  #
;# $
set% (
;( )
}* +
public 
Organization 
? 
Organization )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
} 
} §
qC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Models\GeminiResponse.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Models# )
{ 
public 

class 
GeminiResponse 
{ 
public 
string 
Summary 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 

KeyChanges  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
Suggestions !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
}		 ì
rC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Models\Dto\GithubPRDto.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Dto# &
{ 
public 

class 
GithubPRDto 
{ 
public 
long 
id 
{ 
get 
; 
set !
;! "
}# $
public 
string 
title 
{ 
get !
;! "
set# &
;& '
}( )
=* +
$str, .
;. /
public 
string 
state 
{ 
get !
;! "
set# &
;& '
}( )
=* +
$str, .
;. /
public 
DateTime 

created_at "
{# $
get% (
;( )
set* -
;- .
}/ 0
public		 
UserDto		 
user		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
}

 
public 

class 
UserDto 
{ 
public 
int 
id 
{ 
get 
; 
set  
;  !
}" #
} 
} ›
{C:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Models\Dto\CithubContributorDto.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Dto# &
{ 
public 

class  
GithubContributorDto %
{ 
public 
int 
id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
login 
{ 
get !
;! "
set# &
;& '
}( )
=* +
$str, .
;. /
public 
string 
? 
email 
{ 
get "
;" #
set$ '
;' (
}) *
} 
}		 ﬁ
nC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Models\AuthRequest.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Models# )
{ 
public 

class 
AuthRequest 
{ 
public 
string 
Code 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ©U
mC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Data\AppDbContext.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Data# '
{ 
public 

class 
AppDbContext 
: 
	DbContext  )
{		 
public

 
AppDbContext

 
(

 
DbContextOptions

 ,
<

, -
AppDbContext

- 9
>

9 :
options

; B
)

B C
: 
base 
( 
options 
) 
{ 	
} 	
public 
DbSet 
< 
Organization !
>! "
Organizations# 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
DbSet 
< 
User 
> 
Users  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 
Integration  
>  !
Integrations" .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
DbSet 
< 

Repository 
>  
Repositories! -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public 
DbSet 
< 
PullRequest  
>  !
PullRequests" .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
DbSet 
< 
PRFile 
> 
PRFiles $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
DbSet 
< 
RulePack 
> 
	RulePacks (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
DbSet 
< 
AnalysisResult #
># $
AnalysisResults% 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
public 
DbSet 
< 
ReviewerFeedback %
>% &
	Feedbacks' 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
DbSet 
< 
LearningJournal $
>$ %
LearningJournals& 6
{7 8
get9 <
;< =
set> A
;A B
}C D
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
modelBuilder   
.   
Entity   
<    
User    $
>  $ %
(  % &
)  & '
.!! 
HasOne!! 
(!! 
u!! 
=>!! 
u!! 
.!! 
Organization!! +
)!!+ ,
."" 
WithMany"" 
("" 
)"" 
.## 
HasForeignKey## 
(## 
u##  
=>##! #
u##$ %
.##% &
OrgId##& +
)##+ ,
.$$ 
OnDelete$$ 
($$ 
DeleteBehavior$$ (
.$$( )
Cascade$$) 0
)$$0 1
;$$1 2
modelBuilder&& 
.&& 
Entity&& 
<&&  
Integration&&  +
>&&+ ,
(&&, -
)&&- .
.'' 
HasOne'' 
('' 
i'' 
=>'' 
i'' 
.'' 
Organization'' +
)''+ ,
.(( 
WithMany(( 
((( 
)(( 
.)) 
HasForeignKey)) 
()) 
i))  
=>))! #
i))$ %
.))% &
OrgId))& +
)))+ ,
.** 
OnDelete** 
(** 
DeleteBehavior** (
.**( )
Cascade**) 0
)**0 1
;**1 2
modelBuilder,, 
.,, 
Entity,, 
<,,  

Repository,,  *
>,,* +
(,,+ ,
),,, -
.-- 
HasOne-- 
(-- 
r-- 
=>-- 
r-- 
.-- 
Organization-- +
)--+ ,
... 
WithMany.. 
(.. 
).. 
.// 
HasForeignKey// 
(// 
r//  
=>//! #
r//$ %
.//% &
OrgId//& +
)//+ ,
.00 
OnDelete00 
(00 
DeleteBehavior00 (
.00( )
Cascade00) 0
)000 1
;001 2
modelBuilder22 
.22 
Entity22 
<22  
PullRequest22  +
>22+ ,
(22, -
)22- .
.33 
HasOne33 
(33 
p33 
=>33 
p33 
.33 

Repository33 )
)33) *
.44 
WithMany44 
(44 
)44 
.55 
HasForeignKey55 
(55 
p55  
=>55! #
p55$ %
.55% &
RepoId55& ,
)55, -
.66 
OnDelete66 
(66 
DeleteBehavior66 (
.66( )
Cascade66) 0
)660 1
;661 2
modelBuilder88 
.88 
Entity88 
<88  
PRFile88  &
>88& '
(88' (
)88( )
.99 
HasOne99 
(99 
f99 
=>99 
f99 
.99 
PullRequest99 *
)99* +
.:: 
WithMany:: 
(:: 
):: 
.;; 
HasForeignKey;; 
(;; 
f;;  
=>;;! #
f;;$ %
.;;% &
PrId;;& *
);;* +
.<< 
OnDelete<< 
(<< 
DeleteBehavior<< (
.<<( )
Cascade<<) 0
)<<0 1
;<<1 2
modelBuilder>> 
.>> 
Entity>> 
<>>  
RulePack>>  (
>>>( )
(>>) *
)>>* +
.?? 
HasOne?? 
(?? 
rp?? 
=>?? 
rp??  
.??  !
Organization??! -
)??- .
.@@ 
WithMany@@ 
(@@ 
)@@ 
.AA 
HasForeignKeyAA 
(AA 
rpAA !
=>AA" $
rpAA% '
.AA' (
OrgIdAA( -
)AA- .
.BB 
OnDeleteBB 
(BB 
DeleteBehaviorBB (
.BB( )
CascadeBB) 0
)BB0 1
;BB1 2
modelBuilderDD 
.DD 
EntityDD 
<DD  
AnalysisResultDD  .
>DD. /
(DD/ 0
)DD0 1
.EE 
HasOneEE 
(EE 
aEE 
=>EE 
aEE 
.EE 
PullRequestEE *
)EE* +
.FF 
WithManyFF 
(FF 
)FF 
.GG 
HasForeignKeyGG 
(GG 
aGG  
=>GG! #
aGG$ %
.GG% &
PrIdGG& *
)GG* +
.HH 
OnDeleteHH 
(HH 
DeleteBehaviorHH (
.HH( )
CascadeHH) 0
)HH0 1
;HH1 2
modelBuilderJJ 
.JJ 
EntityJJ 
<JJ  
ReviewerFeedbackJJ  0
>JJ0 1
(JJ1 2
)JJ2 3
.KK 
HasOneKK 
(KK 
fKK 
=>KK 
fKK 
.KK 
AnalysisResultKK -
)KK- .
.LL 
WithManyLL 
(LL 
)LL 
.MM 
HasForeignKeyMM 
(MM 
fMM  
=>MM! #
fMM$ %
.MM% &

AnalysisIdMM& 0
)MM0 1
.NN 
OnDeleteNN 
(NN 
DeleteBehaviorNN (
.NN( )
CascadeNN) 0
)NN0 1
;NN1 2
modelBuilderPP 
.PP 
EntityPP 
<PP  
LearningJournalPP  /
>PP/ 0
(PP0 1
)PP1 2
.QQ 
HasOneQQ 
(QQ 
lQQ 
=>QQ 
lQQ 
.QQ 
OrganizationQQ +
)QQ+ ,
.RR 
WithManyRR 
(RR 
)RR 
.SS 
HasForeignKeySS 
(SS 
lSS  
=>SS! #
lSS$ %
.SS% &
OrgIdSS& +
)SS+ ,
.TT 
OnDeleteTT 
(TT 
DeleteBehaviorTT (
.TT( )
CascadeTT) 0
)TT0 1
;TT1 2
modelBuilderVV 
.VV 
EntityVV 
<VV  
LearningJournalVV  /
>VV/ 0
(VV0 1
)VV1 2
.WW 
HasOneWW 
(WW 
lWW 
=>WW 
lWW 
.WW 

RepositoryWW )
)WW) *
.XX 
WithManyXX 
(XX 
)XX 
.YY 
HasForeignKeyYY 
(YY 
lYY  
=>YY! #
lYY$ %
.YY% &
RepoIdYY& ,
)YY, -
.ZZ 
OnDeleteZZ 
(ZZ 
DeleteBehaviorZZ (
.ZZ( )
CascadeZZ) 0
)ZZ0 1
;ZZ1 2
modelBuilder]] 
.]] 
Entity]] 
<]]  
Organization]]  ,
>]], -
(]]- .
)]]. /
.]]/ 0
HasData]]0 7
(]]7 8
new]]8 ;
Organization]]< H
{^^ 
Id__ 
=__ 
$num__ 
,__ 
Name`` 
=`` 
$str`` 
,`` 
Settingsaa 
=aa 
$straa 
}bb 
)bb 
;bb 
modelBuilderee 
.ee 
Entityee 
<ee  
Useree  $
>ee$ %
(ee% &
)ee& '
.ee' (
HasDataee( /
(ee/ 0
newee0 3
Useree4 8
{ff 
Idgg 
=gg 
$numgg 
,gg 
OrgIdhh 
=hh 
$numhh 
,hh 
Emailii 
=ii 
$strii (
,ii( )
Providerjj 
=jj 
$strjj #
,jj# $
Rolekk 
=kk 
$strkk #
,kk# $
Preferencesll 
=ll 
$strll K
}mm 
)mm 
;mm 
}nn 	
}pp 
}qq À/
yC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Controllers\WebhookController.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Controllers# .
{ 
[		 
ApiController		 
]		 
[

 
Route

 

(


 
$str

 
)

 
]

 
public 

class 
WebhookController "
:# $
ControllerBase% 3
{ 
private 
readonly 
ILogger  
<  !
WebhookController! 2
>2 3
_logger4 ;
;; <
private 
readonly 
AppDbContext %
_db& )
;) *
public 
WebhookController  
(  !
ILogger! (
<( )
WebhookController) :
>: ;
logger< B
,B C
AppDbContextD P
dbQ S
)S T
{ 	
_logger 
= 
logger 
; 
_db 
= 
db 
; 
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GitHub) /
(/ 0
[0 1
FromBody1 9
]9 :
JsonElement; F
payloadG N
)N O
{ 	
try 
{ 
var 
action 
= 
payload $
.$ %
GetProperty% 0
(0 1
$str1 9
)9 :
.: ;
	GetString; D
(D E
)E F
;F G
var 
prUrl 
= 
payload #
.# $
GetProperty$ /
(/ 0
$str0 >
)> ?
.? @
GetProperty@ K
(K L
$strL V
)V W
.W X
	GetStringX a
(a b
)b c
;c d
_logger 
. 
LogInformation &
(& '
$str' Y
,Y Z
action[ a
,a b
prUrlc h
)h i
;i j
var"" 
	prElement"" 
="" 
payload""  '
.""' (
GetProperty""( 3
(""3 4
$str""4 B
)""B C
;""C D
var## 

externalId## 
=##  
	prElement##! *
.##* +
GetProperty##+ 6
(##6 7
$str##7 ;
)##; <
.##< =
GetInt64##= E
(##E F
)##F G
.##G H
ToString##H P
(##P Q
)##Q R
;##R S
var$$ 
title$$ 
=$$ 
	prElement$$ %
.$$% &
GetProperty$$& 1
($$1 2
$str$$2 9
)$$9 :
.$$: ;
	GetString$$; D
($$D E
)$$E F
;$$F G
var%% 
repoFullName%%  
=%%! "
	prElement%%# ,
.%%, -
GetProperty%%- 8
(%%8 9
$str%%9 ?
)%%? @
.%%@ A
GetProperty%%A L
(%%L M
$str%%M S
)%%S T
.%%T U
GetProperty%%U `
(%%` a
$str%%a l
)%%l m
.%%m n
	GetString%%n w
(%%w x
)%%x y
;%%y z
var(( 
repo(( 
=(( 
await((  
_db((! $
.(($ %
Repositories((% 1
.((1 2
FirstOrDefaultAsync((2 E
(((E F
r((F G
=>((H J
r((K L
.((L M
Name((M Q
==((R T
repoFullName((U a
)((a b
;((b c
var)) 
pr)) 
=)) 
new)) $
GitHubIntegrationBackend)) 5
.))5 6
Models))6 <
.))< =
PullRequest))= H
{** 
RepoId++ 
=++ 
repo++ !
?++! "
.++" #
Id++# %
??++& (
$num++) *
,++* +

ExternalId,, 
=,,  

externalId,,! +
,,,+ ,
Title-- 
=-- 
title-- !
??--" $
$str--% '
,--' (
	CreatedAt.. 
=.. 
DateTime..  (
...( )
UtcNow..) /
,../ 0
Status// 
=// 
action// #
??//$ &
$str//' 0
}00 
;00 
if33 
(33 
repo33 
!=33 
null33  
)33  !
{44 
var55 
existing55  
=55! "
await55# (
_db55) ,
.55, -
PullRequests55- 9
.559 :
FirstOrDefaultAsync55: M
(55M N
x55N O
=>55P R
x55S T
.55T U

ExternalId55U _
==55` b

externalId55c m
)55m n
;55n o
if66 
(66 
existing66  
==66! #
null66$ (
)66( )
{77 
_db88 
.88 
PullRequests88 (
.88( )
Add88) ,
(88, -
pr88- /
)88/ 0
;880 1
await99 
_db99 !
.99! "
SaveChangesAsync99" 2
(992 3
)993 4
;994 5
}:: 
};; 
return== 
Ok== 
(== 
)== 
;== 
}>> 
catch?? 
(?? 
	Exception?? 
ex?? 
)??  
{@@ 
_loggerAA 
.AA 
LogErrorAA  
(AA  !
exAA! #
,AA# $
$strAA% >
)AA> ?
;AA? @
returnBB 

StatusCodeBB !
(BB! "
$numBB" %
,BB% &
exBB' )
.BB) *
MessageBB* 1
)BB1 2
;BB2 3
}CC 
}DD 	
}EE 
}FF µ
qC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Models\AnalysisResult.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Models# )
{ 
public 
class 
AnalysisResult 
{		 
[

 	
Key

	 
]

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	

ForeignKey	 
( 
$str !
)! "
]" #
public 
int 
PrId 
{ 
get 
; 
set "
;" #
}$ %
public 
string 
Type 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 
string 
ToolName 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
string 
? 
Findings 
{  !
get" %
;% &
set' *
;* +
}, -
public 
DateTime 
RunAt 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
DateTime. 6
.6 7
UtcNow7 =
;= >
public 
PullRequest 
? 
PullRequest '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} Ωã
vC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Controllers\UserController.cs
	namespaceÖÖ 	&
GitHubIntegrationBackend
ÖÖ
 "
.
ÖÖ" #
Controllers
ÖÖ# .
{ÜÜ 
[
áá 
Route
áá 

(
áá
 
$str
áá 
)
áá 
]
áá 
[
àà 
ApiController
àà 
]
àà 
public
ââ 

class
ââ 
UserController
ââ 
:
ââ  !
ControllerBase
ââ" 0
{
ää 
private
ãã 
readonly
ãã 
AppDbContext
ãã %
_context
ãã& .
;
ãã. /
public
çç 
UserController
çç 
(
çç 
AppDbContext
çç *
context
çç+ 2
)
çç2 3
{
éé 	
_context
èè 
=
èè 
context
èè 
;
èè 
}
êê 	
[
ìì 	
HttpPost
ìì	 
(
ìì 
$str
ìì 
)
ìì 
]
ìì 
publicîî 
async
îî 
Task
îî 
<
îî 
IActionResult
îî 
>
îî  
SignIn
îî! '
(
îî' (
[
îî( )
FromBody
îî) 1
]
îî1 2
UserLoginRequest
îî3 C
loginRequest
îîD P
)
îîP Q
{ïï 
if
ññ 
(
ññ 
loginRequest
ññ 
==
ññ 
null
ññ 
||
ññ 
string
ññ  &
.
ññ& '
IsNullOrEmpty
ññ' 4
(
ññ4 5
loginRequest
ññ5 A
.
ññA B
Email
ññB G
)
ññG H
||
ññI K
loginRequest
ññL X
.
ññX Y
OrganizationId
ññY g
<=
ññh j
$num
ññk l
)
ññl m
{
óó 
return
òò 

BadRequest
òò 
(
òò 
new
òò 
{
òò 
message
òò  '
=
òò( )
$str
òò* Y
}
òòZ [
)
òò[ \
;
òò\ ]
}
ôô 
var
õõ 
user
õõ 
=
õõ 
await
õõ 
_context
õõ 
.
õõ 
Users
õõ #
.
úú 	!
FirstOrDefaultAsync
úú	 
(
úú 
u
úú 
=>
úú !
u
úú" #
.
úú# $
Email
úú$ )
==
úú* ,
loginRequest
úú- 9
.
úú9 :
Email
úú: ?
&&
úú@ B
u
úúC D
.
úúD E
OrgId
úúE J
==
úúK M
loginRequest
úúN Z
.
úúZ [
OrganizationId
úú[ i
)
úúi j
;
úúj k
if
ûû 
(
ûû 
user
ûû 
==
ûû 
null
ûû 
)
ûû 
return
üü 
Unauthorized
üü 
(
üü 
new
üü 
{
üü  !
message
üü" )
=
üü* +
$str
üü, X
}
üüY Z
)
üüZ [
;
üü[ \
if
¢¢ 
(
¢¢ 
user
¢¢ 
.
¢¢ 
Email
¢¢ 
.
¢¢ 
Equals
¢¢ 
(
¢¢ 
$str
¢¢ *
,
¢¢* +
StringComparison
¢¢, <
.
¢¢< =
OrdinalIgnoreCase
¢¢= N
)
¢¢N O
)
¢¢O P
{
££ 
return
§§ 
Ok
§§ 
(
§§ 
new
§§ 
{
•• 	
message
¶¶ 
=
¶¶ 
$str
¶¶ 5
,
¶¶5 6
redirectPath
ßß 
=
ßß 
$str
ßß (
,
ßß( )
user
®® 
=
®® 
new
®® 
{
®® 
user
®® 
.
®® 
Id
®®  
,
®®  !
user
®®" &
.
®®& '
Email
®®' ,
,
®®, -
user
®®. 2
.
®®2 3
OrgId
®®3 8
,
®®8 9
user
®®: >
.
®®> ?
Role
®®? C
}
®®D E
}
©© 	
)
©©	 

;
©©
 
}
™™ 
return
¨¨ 

Ok
¨¨ 
(
¨¨ 
new
¨¨ 
{
≠≠ 
message
ÆÆ 
=
ÆÆ 
$str
ÆÆ $
,
ÆÆ$ %
redirectPath
ØØ 
=
ØØ 
$str
ØØ 
,
ØØ 
user
∞∞ 
=
∞∞ 
new
∞∞ 
{
∞∞ 
user
∞∞ 
.
∞∞ 
Id
∞∞ 
,
∞∞ 
user
∞∞ "
.
∞∞" #
Email
∞∞# (
,
∞∞( )
user
∞∞* .
.
∞∞. /
OrgId
∞∞/ 4
,
∞∞4 5
user
∞∞6 :
.
∞∞: ;
Role
∞∞; ?
}
∞∞@ A
}
±± 
)
±± 
;
±± 
}≤≤ 
[
µµ 	
HttpPost
µµ	 
(
µµ 
$str
µµ 
)
µµ 
]
µµ 
public
∂∂ 
async
∂∂ 
Task
∂∂ 
<
∂∂ 
IActionResult
∂∂ '
>
∂∂' (

VerifyUser
∂∂) 3
(
∂∂3 4
[
∂∂4 5
FromBody
∂∂5 =
]
∂∂= >%
UserVerificationRequest
∂∂? V
verifyRequest
∂∂W d
)
∂∂d e
{
∑∑ 	
if
∏∏ 
(
∏∏ 
verifyRequest
∏∏ 
==
∏∏  
null
∏∏! %
||
∏∏& (
string
∏∏) /
.
∏∏/ 0
IsNullOrEmpty
∏∏0 =
(
∏∏= >
verifyRequest
∏∏> K
.
∏∏K L
Email
∏∏L Q
)
∏∏Q R
||
∏∏S U
verifyRequest
∏∏V c
.
∏∏c d
OrgId
∏∏d i
<=
∏∏j l
$num
∏∏m n
)
∏∏n o
{
ππ 
return
∫∫ 

BadRequest
∫∫ !
(
∫∫! "
new
∫∫" %
{
∫∫& '
message
∫∫( /
=
∫∫0 1
$str
∫∫2 a
}
∫∫b c
)
∫∫c d
;
∫∫d e
}
ªª 
var
ΩΩ 
user
ΩΩ 
=
ΩΩ 
await
ΩΩ 
_context
ΩΩ %
.
ΩΩ% &
Users
ΩΩ& +
.
ææ !
FirstOrDefaultAsync
ææ $
(
ææ$ %
u
ææ% &
=>
ææ' )
u
ææ* +
.
ææ+ ,
Email
ææ, 1
==
ææ2 4
verifyRequest
ææ5 B
.
ææB C
Email
ææC H
&&
ææI K
u
ææL M
.
ææM N
OrgId
ææN S
==
ææT V
verifyRequest
ææW d
.
ææd e
OrgId
ææe j
)
ææj k
;
ææk l
if
¿¿ 
(
¿¿ 
user
¿¿ 
==
¿¿ 
null
¿¿ 
)
¿¿ 
return
¡¡ 
Unauthorized
¡¡ #
(
¡¡# $
new
¡¡$ '
{
¡¡( )
message
¡¡* 1
=
¡¡2 3
$str
¡¡4 c
}
¡¡d e
)
¡¡e f
;
¡¡f g
return
√√ 
Ok
√√ 
(
√√ 
new
√√ 
{
ƒƒ 
message
≈≈ 
=
≈≈ 
$str
≈≈ 6
,
≈≈6 7
user
∆∆ 
=
∆∆ 
new
∆∆ 
{
∆∆ 
user
∆∆ !
.
∆∆! "
Id
∆∆" $
,
∆∆$ %
user
∆∆& *
.
∆∆* +
Email
∆∆+ 0
,
∆∆0 1
user
∆∆2 6
.
∆∆6 7
OrgId
∆∆7 <
,
∆∆< =
user
∆∆> B
.
∆∆B C
Role
∆∆C G
}
∆∆H I
}
«« 
)
«« 
;
«« 
}
»» 	
[
ÀÀ 	
HttpPost
ÀÀ	 
(
ÀÀ 
$str
ÀÀ 
)
ÀÀ 
]
ÀÀ 
public
ÃÃ 
async
ÃÃ 
Task
ÃÃ 
<
ÃÃ 
IActionResult
ÃÃ '
>
ÃÃ' (
SignUp
ÃÃ) /
(
ÃÃ/ 0
[
ÃÃ0 1
FromBody
ÃÃ1 9
]
ÃÃ9 :
User
ÃÃ; ?
registerRequest
ÃÃ@ O
)
ÃÃO P
{
ÕÕ 	
if
ŒŒ 
(
ŒŒ 
registerRequest
ŒŒ 
==
ŒŒ  "
null
ŒŒ# '
||
ŒŒ( *
string
ŒŒ+ 1
.
ŒŒ1 2
IsNullOrEmpty
ŒŒ2 ?
(
ŒŒ? @
registerRequest
ŒŒ@ O
.
ŒŒO P
Email
ŒŒP U
)
ŒŒU V
||
ŒŒW Y
registerRequest
ŒŒZ i
.
ŒŒi j
OrgId
ŒŒj o
<=
ŒŒp r
$num
ŒŒs t
)
ŒŒt u
return
œœ 

BadRequest
œœ !
(
œœ! "
new
œœ" %
{
œœ& '
message
œœ( /
=
œœ0 1
$str
œœ2 `
}
œœa b
)
œœb c
;
œœc d
var
““ 
existingUser
““ 
=
““ 
await
““ $
_context
““% -
.
““- .
Users
““. 3
.
”” !
FirstOrDefaultAsync
”” $
(
””$ %
u
””% &
=>
””' )
u
””* +
.
””+ ,
Email
””, 1
==
””2 4
registerRequest
””5 D
.
””D E
Email
””E J
&&
””K M
u
””N O
.
””O P
OrgId
””P U
==
””V X
registerRequest
””Y h
.
””h i
OrgId
””i n
)
””n o
;
””o p
if
’’ 
(
’’ 
existingUser
’’ 
!=
’’ 
null
’’  $
)
’’$ %
return
÷÷ 
Conflict
÷÷ 
(
÷÷  
new
÷÷  #
{
÷÷$ %
message
÷÷& -
=
÷÷. /
$str
÷÷0 s
}
÷÷t u
)
÷÷u v
;
÷÷v w
if
ŸŸ 
(
ŸŸ 
string
ŸŸ 
.
ŸŸ 
IsNullOrEmpty
ŸŸ $
(
ŸŸ$ %
registerRequest
ŸŸ% 4
.
ŸŸ4 5
Role
ŸŸ5 9
)
ŸŸ9 :
)
ŸŸ: ;
registerRequest
⁄⁄ 
.
⁄⁄  
Role
⁄⁄  $
=
⁄⁄% &
$str
⁄⁄' -
;
⁄⁄- .
if
‹‹ 
(
‹‹ 
string
‹‹ 
.
‹‹ 
IsNullOrEmpty
‹‹ $
(
‹‹$ %
registerRequest
‹‹% 4
.
‹‹4 5
Provider
‹‹5 =
)
‹‹= >
)
‹‹> ?
registerRequest
›› 
.
››  
Provider
››  (
=
››) *
$str
››+ 2
;
››2 3
if
ﬂﬂ 
(
ﬂﬂ 
string
ﬂﬂ 
.
ﬂﬂ 
IsNullOrEmpty
ﬂﬂ $
(
ﬂﬂ$ %
registerRequest
ﬂﬂ% 4
.
ﬂﬂ4 5
Preferences
ﬂﬂ5 @
)
ﬂﬂ@ A
)
ﬂﬂA B
registerRequest
‡‡ 
.
‡‡  
Preferences
‡‡  +
=
‡‡, -
$str
‡‡. \
;
‡‡\ ]
_context
„„ 
.
„„ 
Users
„„ 
.
„„ 
Add
„„ 
(
„„ 
registerRequest
„„ .
)
„„. /
;
„„/ 0
await
‰‰ 
_context
‰‰ 
.
‰‰ 
SaveChangesAsync
‰‰ +
(
‰‰+ ,
)
‰‰, -
;
‰‰- .
return
ÊÊ 
Ok
ÊÊ 
(
ÊÊ 
new
ÊÊ 
{
ÁÁ 
message
ËË 
=
ËË 
$str
ËË 8
,
ËË8 9
user
ÈÈ 
=
ÈÈ 
new
ÈÈ 
{
ÈÈ 
registerRequest
ÈÈ ,
.
ÈÈ, -
Id
ÈÈ- /
,
ÈÈ/ 0
registerRequest
ÈÈ1 @
.
ÈÈ@ A
Email
ÈÈA F
,
ÈÈF G
registerRequest
ÈÈH W
.
ÈÈW X
OrgId
ÈÈX ]
,
ÈÈ] ^
registerRequest
ÈÈ_ n
.
ÈÈn o
Role
ÈÈo s
}
ÈÈt u
}
ÍÍ 
)
ÍÍ 
;
ÍÍ 
}
ÎÎ 	
[
ÓÓ 	
HttpGet
ÓÓ	 
]
ÓÓ 
public
ÔÔ 
async
ÔÔ 
Task
ÔÔ 
<
ÔÔ 
ActionResult
ÔÔ &
<
ÔÔ& '
IEnumerable
ÔÔ' 2
<
ÔÔ2 3
User
ÔÔ3 7
>
ÔÔ7 8
>
ÔÔ8 9
>
ÔÔ9 :
GetUsers
ÔÔ; C
(
ÔÔC D
)
ÔÔD E
{
 	
return
ÒÒ 
Ok
ÒÒ 
(
ÒÒ 
await
ÒÒ 
_context
ÒÒ $
.
ÒÒ$ %
Users
ÒÒ% *
.
ÒÒ* +
ToListAsync
ÒÒ+ 6
(
ÒÒ6 7
)
ÒÒ7 8
)
ÒÒ8 9
;
ÒÒ9 :
}
ÚÚ 	
[
ıı 	
HttpGet
ıı	 
(
ıı 
$str
ıı 
)
ıı 
]
ıı 
public
ˆˆ 
async
ˆˆ 
Task
ˆˆ 
<
ˆˆ 
ActionResult
ˆˆ &
<
ˆˆ& '
User
ˆˆ' +
>
ˆˆ+ ,
>
ˆˆ, -
GetUser
ˆˆ. 5
(
ˆˆ5 6
int
ˆˆ6 9
id
ˆˆ: <
)
ˆˆ< =
{
˜˜ 	
var
¯¯ 
user
¯¯ 
=
¯¯ 
await
¯¯ 
_context
¯¯ %
.
¯¯% &
Users
¯¯& +
.
¯¯+ ,
	FindAsync
¯¯, 5
(
¯¯5 6
id
¯¯6 8
)
¯¯8 9
;
¯¯9 :
if
˘˘ 
(
˘˘ 
user
˘˘ 
==
˘˘ 
null
˘˘ 
)
˘˘ 
return
˙˙ 
NotFound
˙˙ 
(
˙˙  
new
˙˙  #
{
˙˙$ %
message
˙˙& -
=
˙˙. /
$str
˙˙0 @
}
˙˙A B
)
˙˙B C
;
˙˙C D
return
¸¸ 
Ok
¸¸ 
(
¸¸ 
user
¸¸ 
)
¸¸ 
;
¸¸ 
}
˝˝ 	
[
ÄÄ 	
HttpGet
ÄÄ	 
(
ÄÄ 
$str
ÄÄ '
)
ÄÄ' (
]
ÄÄ( )
public
ÅÅ 
async
ÅÅ 
Task
ÅÅ 
<
ÅÅ 
ActionResult
ÅÅ &
<
ÅÅ& '
IEnumerable
ÅÅ' 2
<
ÅÅ2 3
User
ÅÅ3 7
>
ÅÅ7 8
>
ÅÅ8 9
>
ÅÅ9 :$
GetUsersByOrganization
ÅÅ; Q
(
ÅÅQ R
int
ÅÅR U
orgId
ÅÅV [
)
ÅÅ[ \
{
ÇÇ 	
var
ÉÉ 
users
ÉÉ 
=
ÉÉ 
await
ÉÉ 
_context
ÉÉ &
.
ÉÉ& '
Users
ÉÉ' ,
.
ÑÑ 
Where
ÑÑ 
(
ÑÑ 
u
ÑÑ 
=>
ÑÑ 
u
ÑÑ 
.
ÑÑ 
OrgId
ÑÑ #
==
ÑÑ$ &
orgId
ÑÑ' ,
)
ÑÑ, -
.
ÖÖ 
ToListAsync
ÖÖ 
(
ÖÖ 
)
ÖÖ 
;
ÖÖ 
return
áá 
Ok
áá 
(
áá 
users
áá 
)
áá 
;
áá 
}
àà 	
[
ãã 	
HttpPut
ãã	 
(
ãã 
$str
ãã 
)
ãã 
]
ãã 
public
åå 
async
åå 
Task
åå 
<
åå 
IActionResult
åå '
>
åå' (

UpdateUser
åå) 3
(
åå3 4
int
åå4 7
id
åå8 :
,
åå: ;
User
åå< @
updatedUser
ååA L
)
ååL M
{
çç 	
if
éé 
(
éé 
id
éé 
!=
éé 
updatedUser
éé !
.
éé! "
Id
éé" $
)
éé$ %
return
èè 

BadRequest
èè !
(
èè! "
new
èè" %
{
èè& '
message
èè( /
=
èè0 1
$str
èè2 D
}
èèE F
)
èèF G
;
èèG H
_context
ëë 
.
ëë 
Entry
ëë 
(
ëë 
updatedUser
ëë &
)
ëë& '
.
ëë' (
State
ëë( -
=
ëë. /
EntityState
ëë0 ;
.
ëë; <
Modified
ëë< D
;
ëëD E
await
íí 
_context
íí 
.
íí 
SaveChangesAsync
íí +
(
íí+ ,
)
íí, -
;
íí- .
return
ìì 
Ok
ìì 
(
ìì 
new
ìì 
{
ìì 
message
ìì #
=
ìì$ %
$str
ìì& A
}
ììB C
)
ììC D
;
ììD E
}
îî 	
[
óó 	

HttpDelete
óó	 
(
óó 
$str
óó 
)
óó 
]
óó 
public
òò 
async
òò 
Task
òò 
<
òò 
IActionResult
òò '
>
òò' (

DeleteUser
òò) 3
(
òò3 4
int
òò4 7
id
òò8 :
)
òò: ;
{
ôô 	
var
öö 
user
öö 
=
öö 
await
öö 
_context
öö %
.
öö% &
Users
öö& +
.
öö+ ,
	FindAsync
öö, 5
(
öö5 6
id
öö6 8
)
öö8 9
;
öö9 :
if
õõ 
(
õõ 
user
õõ 
==
õõ 
null
õõ 
)
õõ 
return
úú 
NotFound
úú 
(
úú  
new
úú  #
{
úú$ %
message
úú& -
=
úú. /
$str
úú0 @
}
úúA B
)
úúB C
;
úúC D
_context
ûû 
.
ûû 
Users
ûû 
.
ûû 
Remove
ûû !
(
ûû! "
user
ûû" &
)
ûû& '
;
ûû' (
await
üü 
_context
üü 
.
üü 
SaveChangesAsync
üü +
(
üü+ ,
)
üü, -
;
üü- .
return
†† 
Ok
†† 
(
†† 
new
†† 
{
†† 
message
†† #
=
††$ %
$str
††& A
}
††B C
)
††C D
;
††D E
}
°° 	
}
¢¢ 
public
•• 

class
•• 
UserLoginRequest
•• !
{¶¶ 
public
ßß 

string
ßß 
Email
ßß 
{
ßß 
get
ßß 
;
ßß 
set
ßß "
;
ßß" #
}
ßß$ %
public
®® 

int
®® 
OrganizationId
®® 
{
®® 
get
®®  #
;
®®# $
set
®®% (
;
®®( )
}
®®* +
}©© 
public
´´ 

class
´´ %
UserVerificationRequest
´´ (
{
¨¨ 
public
≠≠ 
string
≠≠ 
Email
≠≠ 
{
≠≠ 
get
≠≠ !
;
≠≠! "
set
≠≠# &
;
≠≠& '
}
≠≠( )
public
ÆÆ 
int
ÆÆ 
OrgId
ÆÆ 
{
ÆÆ 
get
ÆÆ 
;
ÆÆ 
set
ÆÆ  #
;
ÆÆ# $
}
ÆÆ% &
}
ØØ 
}∞∞ Ú 
zC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Controllers\TestCaseController.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Controllers# .
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
TestController 
:  !
ControllerBase" 0
{		 
private

 
readonly

 
GeminiService

 &
_gemini

' .
;

. /
public 
TestController 
( 
GeminiService +
gemini, 2
)2 3
{ 	
_gemini 
= 
gemini 
; 
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GenerateTests) 6
(6 7
[7 8
FromBody8 @
]@ A
TestRequestB M
reqN Q
)Q R
{ 	
if 
( 
string 
. 
IsNullOrWhiteSpace )
() *
req* -
.- .
Code. 2
)2 3
)3 4
return 

BadRequest !
(! "
new" %
{& '
error( -
=. /
$str0 ?
}@ A
)A B
;B C
var 
prompt 
= 
$@" 
$str
{ 
req 
. 
Code 	
}	 

$str

" 
; 
var 
result 
= 
await 
_gemini &
.& '
GenerateAsync' 4
(4 5
prompt5 ;
); <
;< =
return   
Ok   
(   
new   
{   
result   "
}  # $
)  $ %
;  % &
}!! 	
[## 	
HttpPost##	 
(## 
$str## 
)## 
]## 
public$$ 
async$$ 
Task$$ 
<$$ 
IActionResult$$ '
>$$' (
ValidateTests$$) 6
($$6 7
[$$7 8
FromBody$$8 @
]$$@ A
ValidationRequest$$B S
req$$T W
)$$W X
{%% 	
if&& 
(&& 
string&& 
.&& 
IsNullOrWhiteSpace&& )
(&&) *
req&&* -
.&&- .
Tests&&. 3
)&&3 4
)&&4 5
return'' 

BadRequest'' !
(''! "
new''" %
{''& '
error''( -
=''. /
$str''0 @
}''A B
)''B C
;''C D
var)) 
prompt)) 
=)) 
$@")) 
$str).
{.. 
req.. 
... 
Tests.. 

}..
 
$str./
"// 
;// 
var11 
result11 
=11 
await11 
_gemini11 &
.11& '
GenerateAsync11' 4
(114 5
prompt115 ;
)11; <
;11< =
return22 
Ok22 
(22 
new22 
{22 
result22 "
}22# $
)22$ %
;22% &
}33 	
}44 
public66 

class66 
TestRequest66 
{66 
public66 %
string66& ,
Code66- 1
{662 3
get664 7
;667 8
set669 <
;66< =
}66> ?
=66@ A
string66B H
.66H I
Empty66I N
;66N O
}66P Q
public77 

class77 
ValidationRequest77 "
{77# $
public77% +
string77, 2
Tests773 8
{779 :
get77; >
;77> ?
set77@ C
;77C D
}77E F
=77G H
string77I O
.77O P
Empty77P U
;77U V
}77W X
}88 »
{C:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Controllers\SonarQubeController.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Controllers# .
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
SonarQubeController $
:% &
ControllerBase' 5
{		 
private

 
readonly

 
SonarQubeService

 )
_sonarService

* 7
;

7 8
public 
SonarQubeController "
(" #
SonarQubeService# 3
sonarService4 @
)@ A
{ 	
_sonarService 
= 
sonarService (
;( )
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetDashboard) 5
(5 6
[6 7
	FromQuery7 @
]@ A
stringB H
repoNameI Q
)Q R
{ 	
if 
( 
string 
. 
IsNullOrEmpty $
($ %
repoName% -
)- .
). /
return 

BadRequest !
(! "
$str" @
)@ A
;A B
try 
{ 
bool 
	connected 
=  
await! &
_sonarService' 4
.4 5#
IsProjectConnectedAsync5 L
(L M
repoNameM U
)U V
;V W
if 
( 
! 
	connected 
) 
return 
Ok 
( 
new !
{" #
	connected$ -
=. /
false0 5
,5 6
message7 >
=? @
$strA i
}j k
)k l
;l m
var 
metrics 
= 
await #
_sonarService$ 1
.1 2"
GetProjectMetricsAsync2 H
(H I
repoNameI Q
)Q R
;R S
var 
issues 
= 
await "
_sonarService# 0
.0 1!
GetProjectIssuesAsync1 F
(F G
repoNameG O
)O P
;P Q
var   
fileDuplications   $
=  % &
await  ' ,
_sonarService  - :
.  : ;$
GetFileDuplicationsAsync  ; S
(  S T
repoName  T \
)  \ ]
;  ] ^
var!! 
trends!! 
=!! 
await!! "
_sonarService!!# 0
.!!0 1"
GetActivityTrendsAsync!!1 G
(!!G H
repoName!!H P
)!!P Q
;!!Q R
return## 
Ok## 
(## 
new## 
{$$ 
	connected%% 
=%% 
true%%  $
,%%$ %

projectKey&& 
=&&  
repoName&&! )
,&&) *
metrics'' 
,'' 
issues(( 
,(( 
fileDuplications)) $
,))$ %
trends** 
}++ 
)++ 
;++ 
},, 
catch-- 
(-- 
	Exception-- 
ex-- 
)--  
{.. 
return// 

StatusCode// !
(//! "
$num//" %
,//% &
new//' *
{//+ ,
error//- 2
=//3 4
$str//5 Z
,//Z [
details//\ c
=//d e
ex//f h
.//h i
Message//i p
}//q r
)//r s
;//s t
}00 
}11 	
}22 
}33 ’ 
xC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Controllers\ReviewController.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Controllers# .
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public		 

class		 
ReviewController		 !
:		" #
ControllerBase		$ 2
{

 
private 
readonly 
GeminiService &
_gemini' .
;. /
private 
readonly 
IWebHostEnvironment ,
_env- 1
;1 2
private 
readonly 
IConfiguration '
_config( /
;/ 0
public 
ReviewController 
(  
GeminiService  -
gemini. 4
,4 5
IWebHostEnvironment6 I
envJ M
,M N
IConfigurationO ]
config^ d
)d e
{ 	
_gemini 
= 
gemini 
; 
_env 
= 
env 
; 
_config 
= 
config 
; 
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
AnalyzeCode) 4
(4 5
[5 6
FromBody6 >
]> ?
ReviewRequest@ M
requestN U
,U V
CancellationTokenW h
cti k
)k l
{ 	
if 
( 
string 
. 
IsNullOrWhiteSpace )
() *
request* 1
.1 2
Code2 6
)6 7
)7 8
return 

BadRequest !
(! "
new" %
{& '
error( -
=. /
$str0 Q
}R S
)S T
;T U
var 
	rulesPath 
= 
Path  
.  !
Combine! (
(( )
_env) -
.- .
ContentRootPath. =
,= >
$str? N
)N O
;O P
string 
	rulesJson 
= 
$str #
;# $
if 
( 
System 
. 
IO 
. 
File 
. 
Exists %
(% &
	rulesPath& /
)/ 0
)0 1
{   
	rulesJson!! 
=!! 
await!! !
System!!" (
.!!( )
IO!!) +
.!!+ ,
File!!, 0
.!!0 1
ReadAllTextAsync!!1 A
(!!A B
	rulesPath!!B K
,!!K L
ct!!M O
)!!O P
;!!P Q
}"" 
var$$ 
prompt$$ 
=$$ 
$@"$$ 
$str$% .
{%%. /
_config%%/ 6
[%%6 7
$str%%7 J
]%%J K
}%%K L
$str%'L
{'' 
	rulesJson'' 

}''
 
$str'-
{-- 
request-- 
.-- 	
Code--	 
}-- 
$str-.
".. 
;.. 
var00 
result00 
=00 
await00 
_gemini00 &
.00& '
GenerateAsync00' 4
(004 5
prompt005 ;
,00; <
ct00= ?
)00? @
;00@ A
return11 
Ok11 
(11 
new11 
{11 
result11 "
}11# $
)11$ %
;11% &
}22 	
}33 
public55 

class55 
ReviewRequest55 
{66 
public77 
string77 
Code77 
{77 
get77  
;77  !
set77" %
;77% &
}77' (
=77) *
string77+ 1
.771 2
Empty772 7
;777 8
}88 
}99 ¢™
|C:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Controllers\RepositoryController.cs
	namespace

 	$
GitHubIntegrationBackend


 "
.

" #
Controllers

# .
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class  
RepositoryController %
:& '
ControllerBase( 6
{ 
private 
readonly 
AppDbContext %
_db& )
;) *
private 
readonly 
GitHubService &
_gitHubService' 5
;5 6
private 
readonly 
IConfiguration '
_config( /
;/ 0
private 
readonly 
ILogger  
<  ! 
RepositoryController! 5
>5 6
_logger7 >
;> ?
public  
RepositoryController #
(# $
AppDbContext$ 0
db1 3
,3 4
GitHubService5 B
gitHubServiceC P
,P Q
IConfigurationR `
configa g
,g h
ILoggeri p
<p q!
RepositoryController	q Ö
>
Ö Ü
logger
á ç
)
ç é
{ 	
_db 
= 
db 
; 
_gitHubService 
= 
gitHubService *
;* +
_config 
= 
config 
; 
_logger 
= 
logger 
; 
} 	
[ 
HttpGet 
( 	
$str	 
) 
] 
public 
async 
Task 
< 
IActionResult 
>  
GetById! (
(( )
int) ,
id- /
)/ 0
{   
if!! 
(!! 
id!! 

<=!! 
$num!! 
)!! 
return"" 

BadRequest"" 
("" 
$str"" 1
)""1 2
;""2 3
var$$ 
repo$$ 
=$$ 
await$$ 
_db$$ 
.$$ 
Repositories$$ %
.$$% &
FirstOrDefaultAsync$$& 9
($$9 :
r$$: ;
=>$$< >
r$$? @
.$$@ A
Id$$A C
==$$D F
id$$G I
)$$I J
;$$J K
if&& 
(&& 
repo&& 
==&& 
null&& 
)&& 
return'' 
NotFound'' 
('' 
$"'' 
$str'' -
{''- .
id''. 0
}''0 1
$str''1 ;
"''; <
)''< =
;''= >
return)) 

Ok)) 
()) 
repo)) 
))) 
;)) 
}** 
[,, 	
HttpGet,,	 
(,, 
$str,, 
),, 
],, 
public-- 
async-- 
Task-- 
<-- 
IActionResult-- 
>--  
GetAllGitHubRepos--! 2
(--2 3
[--3 4
	FromQuery--4 =
]--= >
int--? B
orgId--C H
)--H I
{.. 
if// 
(// 
orgId// 
<=// 
$num// 
)// 
return// 

BadRequest// %
(//% &
$str//& 6
)//6 7
;//7 8
var11 
integration11 
=11 
await11 
_db11 
.11  
Integrations11  ,
.22 	
FirstOrDefaultAsync22	 
(22 
i22 
=>22 !
i22" #
.22# $
OrgId22$ )
==22* ,
orgId22- 2
&&223 5
i226 7
.227 8
Provider228 @
==22A C
$str22D L
)22L M
;22M N
if44 
(44 
integration44 
==44 
null44 
)44 
return55 

BadRequest55 
(55 
$str55 >
)55> ?
;55? @
var77 
cfg77 
=77 
JsonSerializer77 
.77 
Deserialize77 (
<77( )
JsonElement77) 4
>774 5
(775 6
integration776 A
.77A B
Config77B H
??77I K
$str77L P
)77P Q
;77Q R
if88 
(88 
!88 	
cfg88	 
.88 
TryGetProperty88 
(88 
$str88 *
,88* +
out88, /
var880 3
tokenEl884 ;
)88; <
)88< =
return99 

BadRequest99 
(99 
$str99 5
)995 6
;996 7
var;; 
token;; 
=;; 
tokenEl;; 
.;; 
	GetString;; !
(;;! "
);;" #
;;;# $
var== 
(== 	
ok==	 
,== 
body== 
,== 
status== 
)== 
=== 
await== "
_gitHubService==# 1
.==1 2
GetUserReposAsync==2 C
(==C D
token==D I
!==I J
)==J K
;==K L
if>> 
(>> 
!>> 	
ok>>	 
)>> 
return>> 

StatusCode>> 
(>> 
status>> %
,>>% &
body>>' +
)>>+ ,
;>>, -
return@@ 

Ok@@ 
(@@ 
JsonDocument@@ 
.@@ 
Parse@@  
(@@  !
body@@! %
)@@% &
)@@& '
;@@' (
}AA 
[DD 	
HttpPostDD	 
(DD 
$strDD 
)DD 
]DD 
publicEE 
asyncEE 
TaskEE 
<EE 
IActionResultEE '
>EE' (
SyncEE) -
(EE- .
[EE. /
	FromQueryEE/ 8
]EE8 9
intEE: =
orgIdEE> C
)EEC D
{FF 	
ifGG 
(GG 
orgIdGG 
<=GG 
$numGG 
)GG 
returnGG "

BadRequestGG# -
(GG- .
$strGG. >
)GG> ?
;GG? @
varII 
integrationII 
=II 
awaitII #
_dbII$ '
.II' (
IntegrationsII( 4
.II4 5
FirstOrDefaultAsyncII5 H
(IIH I
iIII J
=>IIK M
iIIN O
.IIO P
OrgIdIIP U
==IIV X
orgIdIIY ^
&&II_ a
iIIb c
.IIc d
ProviderIId l
==IIm o
$strIIp x
)IIx y
;IIy z
ifJJ 
(JJ 
integrationJJ 
==JJ 
nullJJ #
)JJ# $
returnJJ% +

BadRequestJJ, 6
(JJ6 7
$strJJ7 [
)JJ[ \
;JJ\ ]
varLL 
cfgLL 
=LL 
JsonSerializerLL $
.LL$ %
DeserializeLL% 0
<LL0 1
JsonElementLL1 <
>LL< =
(LL= >
integrationLL> I
.LLI J
ConfigLLJ P
??LLQ S
$strLLT X
)LLX Y
;LLY Z
ifMM 
(MM 
!MM 
cfgMM 
.MM 
TryGetPropertyMM #
(MM# $
$strMM$ 2
,MM2 3
outMM4 7
varMM8 ;
tokenElMM< C
)MMC D
)MMD E
returnMMF L

BadRequestMMM W
(MMW X
$strMMX s
)MMs t
;MMt u
varNN 
tokenNN 
=NN 
tokenElNN 
.NN  
	GetStringNN  )
(NN) *
)NN* +
;NN+ ,
varPP 
(PP 
okPP 
,PP 
bodyPP 
,PP 
statusPP !
)PP! "
=PP# $
awaitPP% *
_gitHubServicePP+ 9
.PP9 :
GetUserReposAsyncPP: K
(PPK L
tokenPPL Q
!PPQ R
)PPR S
;PPS T
_loggerQQ 
.QQ 
LogInformationQQ "
(QQ" #
$strQQ# J
,QQJ K
statusQQL R
)QQR S
;QQS T
ifSS 
(SS 
!SS 
okSS 
)SS 
returnSS 

StatusCodeSS &
(SS& '
statusSS' -
,SS- .
bodySS/ 3
)SS3 4
;SS4 5
tryVV 
{WW 
varXX 
docXX 
=XX 
JsonDocumentXX &
.XX& '
ParseXX' ,
(XX, -
bodyXX- 1
)XX1 2
;XX2 3
foreachYY 
(YY 
varYY 
itemYY !
inYY" $
docYY% (
.YY( )
RootElementYY) 4
.YY4 5
EnumerateArrayYY5 C
(YYC D
)YYD E
)YYE F
{ZZ 
var[[ 

externalId[[ "
=[[# $
item[[% )
.[[) *
GetProperty[[* 5
([[5 6
$str[[6 :
)[[: ;
.[[; <
GetInt64[[< D
([[D E
)[[E F
.[[F G
ToString[[G O
([[O P
)[[P Q
;[[Q R
var\\ 
name\\ 
=\\ 
item\\ #
.\\# $
GetProperty\\$ /
(\\/ 0
$str\\0 6
)\\6 7
.\\7 8
	GetString\\8 A
(\\A B
)\\B C
??\\D F
$str\\G I
;\\I J
var]] 
fullName]]  
=]]! "
item]]# '
.]]' (
GetProperty]]( 3
(]]3 4
$str]]4 ?
)]]? @
.]]@ A
	GetString]]A J
(]]J K
)]]K L
??]]M O
$str]]P R
;]]R S
var^^ 
provider^^  
=^^! "
$str^^# +
;^^+ ,
var`` 
existing``  
=``! "
await``# (
_db``) ,
.``, -
Repositories``- 9
.``9 :
FirstOrDefaultAsync``: M
(``M N
r``N O
=>``P R
r``S T
.``T U

ExternalId``U _
==``` b

externalId``c m
&&``n p
r``q r
.``r s
OrgId``s x
==``y {
orgId	``| Å
)
``Å Ç
;
``Ç É
ifaa 
(aa 
existingaa  
==aa! #
nullaa$ (
)aa( )
{bb 
varcc 
repocc  
=cc! "
newcc# &

Repositorycc' 1
{dd 
OrgIdee !
=ee" #
orgIdee$ )
,ee) *
Providerff $
=ff% &
providerff' /
,ff/ 0

ExternalIdgg &
=gg' (

externalIdgg) 3
,gg3 4
Namehh  
=hh! "
fullNamehh# +
,hh+ ,
LastSyncedAtii (
=ii) *
DateTimeii+ 3
.ii3 4
UtcNowii4 :
}jj 
;jj 
_dbkk 
.kk 
Repositorieskk (
.kk( )
Addkk) ,
(kk, -
repokk- 1
)kk1 2
;kk2 3
}ll 
elsemm 
{nn 
existingoo  
.oo  !
Nameoo! %
=oo& '
fullNameoo( 0
;oo0 1
existingpp  
.pp  !
LastSyncedAtpp! -
=pp. /
DateTimepp0 8
.pp8 9
UtcNowpp9 ?
;pp? @
_dbqq 
.qq 
Repositoriesqq (
.qq( )
Updateqq) /
(qq/ 0
existingqq0 8
)qq8 9
;qq9 :
}rr 
}ss 
awaituu 
_dbuu 
.uu 
SaveChangesAsyncuu *
(uu* +
)uu+ ,
;uu, -
varxx 
reposxx 
=xx 
awaitxx !
_dbxx" %
.xx% &
Repositoriesxx& 2
.xx2 3
Wherexx3 8
(xx8 9
rxx9 :
=>xx; =
rxx> ?
.xx? @
OrgIdxx@ E
==xxF H
orgIdxxI N
)xxN O
.xxO P
ToListAsyncxxP [
(xx[ \
)xx\ ]
;xx] ^
returnyy 
Okyy 
(yy 
reposyy 
)yy  
;yy  !
}zz 
catch{{ 
({{ 
	Exception{{ 
ex{{ 
){{  
{|| 
_logger}} 
.}} 
LogError}}  
(}}  !
ex}}! #
,}}# $
$str}}% G
)}}G H
;}}H I
return~~ 

StatusCode~~ !
(~~! "
$num~~" %
,~~% &
$str~~' G
)~~G H
;~~H I
} 
}
ÄÄ 	
[
ÉÉ 	
HttpGet
ÉÉ	 
]
ÉÉ 
public
ÑÑ 
async
ÑÑ 
Task
ÑÑ 
<
ÑÑ 
IActionResult
ÑÑ '
>
ÑÑ' (
List
ÑÑ) -
(
ÑÑ- .
[
ÑÑ. /
	FromQuery
ÑÑ/ 8
]
ÑÑ8 9
int
ÑÑ: =
orgId
ÑÑ> C
)
ÑÑC D
{
ÖÖ 	
if
ÜÜ 
(
ÜÜ 
orgId
ÜÜ 
<=
ÜÜ 
$num
ÜÜ 
)
ÜÜ 
return
ÜÜ "

BadRequest
ÜÜ# -
(
ÜÜ- .
$str
ÜÜ. >
)
ÜÜ> ?
;
ÜÜ? @
var
áá 
repos
áá 
=
áá 
await
áá 
_db
áá !
.
áá! "
Repositories
áá" .
.
áá. /
Where
áá/ 4
(
áá4 5
r
áá5 6
=>
áá7 9
r
áá: ;
.
áá; <
OrgId
áá< A
==
ááB D
orgId
ááE J
)
ááJ K
.
ááK L
ToListAsync
ááL W
(
ááW X
)
ááX Y
;
ááY Z
return
àà 
Ok
àà 
(
àà 
repos
àà 
)
àà 
;
àà 
}
ââ 	
[
åå 	
HttpPost
åå	 
(
åå 
$str
åå 
)
åå 
]
åå 
public
çç 
async
çç 
Task
çç 
<
çç 
IActionResult
çç '
>
çç' (
Connect
çç) 0
(
çç0 1
[
çç1 2
	FromQuery
çç2 ;
]
çç; <
int
çç= @
orgId
ççA F
,
ççF G
[
ççH I
FromBody
ççI Q
]
ççQ R
ConnectRequest
ççS a
req
ççb e
)
ççe f
{
éé 	
if
èè 
(
èè 
orgId
èè 
<=
èè 
$num
èè 
)
èè 
return
èè "

BadRequest
èè# -
(
èè- .
$str
èè. >
)
èè> ?
;
èè? @
if
êê 
(
êê 
string
êê 
.
êê 
IsNullOrEmpty
êê $
(
êê$ %
req
êê% (
.
êê( )
Owner
êê) .
)
êê. /
||
êê0 2
string
êê3 9
.
êê9 :
IsNullOrEmpty
êê: G
(
êêG H
req
êêH K
.
êêK L
Repo
êêL P
)
êêP Q
)
êêQ R
return
êêS Y

BadRequest
êêZ d
(
êêd e
$str
êêe |
)
êê| }
;
êê} ~
var
íí 
integration
íí 
=
íí 
await
íí #
_db
íí$ '
.
íí' (
Integrations
íí( 4
.
íí4 5!
FirstOrDefaultAsync
íí5 H
(
ííH I
i
ííI J
=>
ííK M
i
ííN O
.
ííO P
OrgId
ííP U
==
ííV X
orgId
ííY ^
&&
íí_ a
i
ííb c
.
ííc d
Provider
ííd l
==
íím o
$str
ííp x
)
ííx y
;
ííy z
if
ìì 
(
ìì 
integration
ìì 
==
ìì 
null
ìì #
)
ìì# $
return
ìì% +

BadRequest
ìì, 6
(
ìì6 7
$str
ìì7 T
)
ììT U
;
ììU V
var
ïï 
cfg
ïï 
=
ïï 
JsonSerializer
ïï $
.
ïï$ %
Deserialize
ïï% 0
<
ïï0 1
JsonElement
ïï1 <
>
ïï< =
(
ïï= >
integration
ïï> I
.
ïïI J
Config
ïïJ P
??
ïïQ S
$str
ïïT X
)
ïïX Y
;
ïïY Z
if
ññ 
(
ññ 
!
ññ 
cfg
ññ 
.
ññ 
TryGetProperty
ññ #
(
ññ# $
$str
ññ$ 2
,
ññ2 3
out
ññ4 7
var
ññ8 ;
tokenEl
ññ< C
)
ññC D
)
ññD E
return
ññF L

BadRequest
ññM W
(
ññW X
$str
ññX s
)
ññs t
;
ññt u
var
óó 
token
óó 
=
óó 
tokenEl
óó 
.
óó  
	GetString
óó  )
(
óó) *
)
óó* +
!
óó+ ,
;
óó, -
var
öö 

webhookUrl
öö 
=
öö 
_config
öö $
[
öö$ %
$str
öö% 9
]
öö9 :
??
öö; =
$str
öö> h
;
ööh i
var
õõ 
secret
õõ 
=
õõ 
_config
õõ  
[
õõ  !
$str
õõ! 8
]
õõ8 9
??
õõ: <
$str
õõ= N
;
õõN O
var
ùù 
(
ùù 
ok
ùù 
,
ùù 
body
ùù 
,
ùù 
status
ùù !
)
ùù! "
=
ùù# $
await
ùù% *
_gitHubService
ùù+ 9
.
ùù9 : 
CreateWebhookAsync
ùù: L
(
ùùL M
token
ùùM R
,
ùùR S
req
ùùT W
.
ùùW X
Owner
ùùX ]
,
ùù] ^
req
ùù_ b
.
ùùb c
Repo
ùùc g
,
ùùg h

webhookUrl
ùùi s
,
ùùs t
secret
ùùu {
)
ùù{ |
;
ùù| }
if
ûû 
(
ûû 
!
ûû 
ok
ûû 
)
ûû 
{
ûû 
Console
üü 
.
üü 
	WriteLine
üü 
(
üü 
$str
üü (
+
üü) *
body
üü+ /
)
üü/ 0
;
üü0 1
}†† 
var
££ 

externalId
££ 
=
££ 
req
££  
.
££  !

ExternalId
££! +
??
££, .
$str
££/ 1
;
££1 2
var
§§ 
repoDb
§§ 
=
§§ 
await
§§ 
_db
§§ "
.
§§" #
Repositories
§§# /
.
§§/ 0!
FirstOrDefaultAsync
§§0 C
(
§§C D
r
§§D E
=>
§§F H
r
§§I J
.
§§J K

ExternalId
§§K U
==
§§V X

externalId
§§Y c
&&
§§d f
r
§§g h
.
§§h i
OrgId
§§i n
==
§§o q
orgId
§§r w
)
§§w x
;
§§x y
if
•• 
(
•• 
repoDb
•• 
==
•• 
null
•• 
)
•• 
{
¶¶ 
repoDb
ßß 
=
ßß 
new
ßß 

Repository
ßß '
{
®® 
OrgId
©© 
=
©© 
orgId
©© !
,
©©! "
Provider
™™ 
=
™™ 
$str
™™ '
,
™™' (

ExternalId
´´ 
=
´´  

externalId
´´! +
,
´´+ ,
Name
¨¨ 
=
¨¨ 
$"
¨¨ 
{
¨¨ 
req
¨¨ !
.
¨¨! "
Owner
¨¨" '
}
¨¨' (
$str
¨¨( )
{
¨¨) *
req
¨¨* -
.
¨¨- .
Repo
¨¨. 2
}
¨¨2 3
"
¨¨3 4
,
¨¨4 5
LastSyncedAt
≠≠  
=
≠≠! "
DateTime
≠≠# +
.
≠≠+ ,
UtcNow
≠≠, 2
}
ÆÆ 
;
ÆÆ 
_db
ØØ 
.
ØØ 
Repositories
ØØ  
.
ØØ  !
Add
ØØ! $
(
ØØ$ %
repoDb
ØØ% +
)
ØØ+ ,
;
ØØ, -
}
∞∞ 
else
±± 
{
≤≤ 
repoDb
≥≥ 
.
≥≥ 
LastSyncedAt
≥≥ #
=
≥≥$ %
DateTime
≥≥& .
.
≥≥. /
UtcNow
≥≥/ 5
;
≥≥5 6
repoDb
¥¥ 
.
¥¥ 
Name
¥¥ 
=
¥¥ 
$"
¥¥  
{
¥¥  !
req
¥¥! $
.
¥¥$ %
Owner
¥¥% *
}
¥¥* +
$str
¥¥+ ,
{
¥¥, -
req
¥¥- 0
.
¥¥0 1
Repo
¥¥1 5
}
¥¥5 6
"
¥¥6 7
;
¥¥7 8
_db
µµ 
.
µµ 
Repositories
µµ  
.
µµ  !
Update
µµ! '
(
µµ' (
repoDb
µµ( .
)
µµ. /
;
µµ/ 0
}
∂∂ 
await
∏∏ 
_db
∏∏ 
.
∏∏ 
SaveChangesAsync
∏∏ &
(
∏∏& '
)
∏∏' (
;
∏∏( )
return
∫∫ 
Ok
∫∫ 
(
∫∫ 
new
∫∫ 
{
∫∫ 
message
∫∫ #
=
∫∫$ %
$str
∫∫& F
,
∫∫F G
details
∫∫H O
=
∫∫P Q
body
∫∫R V
}
∫∫W X
)
∫∫X Y
;
∫∫Y Z
}
ªª 	
}
ºº 
public
ææ 

class
ææ 
ConnectRequest
ææ 
{
øø 
public
¿¿ 
string
¿¿ 
Owner
¿¿ 
{
¿¿ 
get
¿¿ !
;
¿¿! "
set
¿¿# &
;
¿¿& '
}
¿¿( )
=
¿¿* +
string
¿¿, 2
.
¿¿2 3
Empty
¿¿3 8
;
¿¿8 9
public
¡¡ 
string
¡¡ 
Repo
¡¡ 
{
¡¡ 
get
¡¡  
;
¡¡  !
set
¡¡" %
;
¡¡% &
}
¡¡' (
=
¡¡) *
string
¡¡+ 1
.
¡¡1 2
Empty
¡¡2 7
;
¡¡7 8
public
¬¬ 
string
¬¬ 
?
¬¬ 

ExternalId
¬¬ !
{
¬¬" #
get
¬¬$ '
;
¬¬' (
set
¬¬) ,
;
¬¬, -
}
¬¬. /
}
√√ 
}ƒƒ Ωe
~C:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Controllers\PullRequestsController.cs
	namespace		 	$
GitHubIntegrationBackend		
 "
.		" #
Controllers		# .
{

 
[ 
ApiController 
] 
[ 
Route 
( 
$str 
) 
] 
public 
class !
PullRequestController "
:# $
ControllerBase% 3
{ 
private 
readonly 
PullRequestService '
_service( 0
;0 1
private 
readonly 
AppDbContext !
_context" *
;* +
public 
!
PullRequestController  
(  !
PullRequestService! 3
service4 ;
,; <
AppDbContext= I
contextJ Q
)Q R
{ 
_service 
= 
service 
; 
_context 
= 
context 
; 
} 
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
	GetAllPRs) 2
(2 3
)3 4
{ 	
var 
prs 
= 
await 
_context $
.$ %
PullRequests% 1
. 
Include  
(  !
p! "
=># %
p& '
.' (

Repository( 2
)2 3
. 
ToListAsync $
($ %
)% &
;& '
return   
Ok   
(   
prs   
)   
;   
}!! 	
[$$ 	
HttpGet$$	 
($$ 
$str$$ 
)$$ 
]$$ 
public%% 
async%% 
Task%% 
<%% 
IActionResult%% '
>%%' (
	GetPRById%%) 2
(%%2 3
int%%3 6
id%%7 9
)%%9 :
{&& 	
var'' 
pr'' 
='' 
await'' 
_context'' #
.''# $
PullRequests''$ 0
.(( 
Include((  
(((  !
p((! "
=>((# %
p((& '
.((' (

Repository((( 2
)((2 3
.)) 
FirstOrDefaultAsync)) ,
()), -
p))- .
=>))/ 1
p))2 3
.))3 4
Id))4 6
==))7 9
id)): <
)))< =
;))= >
if++ 
(++ 
pr++ 
==++ 
null++ 
)++ 
return++ "
NotFound++# +
(+++ ,
$str++, D
)++D E
;++E F
return-- 
Ok-- 
(-- 
pr-- 
)-- 
;-- 
}.. 	
[11 	
HttpGet11	 
(11 
$str11  
)11  !
]11! "
public22 
async22 
Task22 
<22 
IActionResult22 '
>22' (
GetPRsByRepo22) 5
(225 6
int226 9
repoId22: @
)22@ A
{33 	
var44 
prs44 
=44 
await44 
_context44 $
.44$ %
PullRequests44% 1
.55 
Where55 
(55 
p55  
=>55! #
p55$ %
.55% &
RepoId55& ,
==55- /
repoId550 6
)556 7
.66 
Include66  
(66  !
p66! "
=>66# %
p66& '
.66' (

Repository66( 2
)662 3
.77 
ToListAsync77 $
(77$ %
)77% &
;77& '
return99 
Ok99 
(99 
prs99 
)99 
;99 
}:: 	
[>> 	
HttpPost>>	 
]>> 
public?? 
async?? 
Task?? 
<?? 
IActionResult?? '
>??' (
CreatePR??) 1
(??1 2
[??2 3
FromBody??3 ;
]??; <
PullRequest??= H
body??I M
)??M N
{@@ 	
ifAA 
(AA 
!AA 

ModelStateAA 
.AA 
IsValidAA #
)AA# $
returnBB 

BadRequestBB !
(BB! "

ModelStateBB" ,
)BB, -
;BB- .
varEE 
repoEE 
=EE 
awaitEE 
_contextEE %
.EE% &
RepositoriesEE& 2
.EE2 3
	FindAsyncEE3 <
(EE< =
bodyEE= A
.EEA B
RepoIdEEB H
)EEH I
;EEI J
ifFF 
(FF 
repoFF 
==FF 
nullFF 
)FF 
returnGG 

BadRequestGG !
(GG! "
$strGG" 8
)GG8 9
;GG9 :
varII 
prII 
=II 
newII 
PullRequestII $
{JJ 
RepoIdKK 
=KK 
bodyKK 
.KK 
RepoIdKK $
,KK$ %

ExternalIdLL 
=LL 
bodyLL !
.LL! "

ExternalIdLL" ,
,LL, -
TitleMM 
=MM 
bodyMM 
.MM 
TitleMM "
,MM" #
AuthorIdNN 
=NN 
bodyNN 
.NN  
AuthorIdNN  (
,NN( )
StatusOO 
=OO 
stringOO 
.OO  
IsNullOrWhiteSpaceOO  2
(OO2 3
bodyOO3 7
.OO7 8
StatusOO8 >
)OO> ?
?OO@ A
$strOOB H
:OOI J
bodyOOK O
.OOO P
StatusOOP V
,OOV W
	CreatedAtPP 
=PP 
DateTimePP $
.PP$ %
UtcNowPP% +
}QQ 
;QQ 
_contextSS 
.SS 
PullRequestsSS !
.SS! "
AddSS" %
(SS% &
prSS& (
)SS( )
;SS) *
awaitTT 
_contextTT 
.TT 
SaveChangesAsyncTT +
(TT+ ,
)TT, -
;TT- .
returnVV 
OkVV 
(VV 
prVV 
)VV 
;VV 
}WW 	
[YY 	
HttpPostYY	 
(YY 
$strYY !
)YY! "
]YY" #
publicZZ 

asyncZZ 
TaskZZ 
<ZZ 
IActionResultZZ #
>ZZ# $
SyncPRsZZ% ,
(ZZ, -
intZZ- 0
repoIdZZ1 7
)ZZ7 8
{[[ 
var\\ 
repo\\ 
=\\ 
await\\ 
_context\\ !
.\\! "
Repositories\\" .
.\\. /
	FindAsync\\/ 8
(\\8 9
repoId\\9 ?
)\\? @
;\\@ A
if]] 

(]] 
repo]] 
==]] 
null]] 
)]] 
return]]  
NotFound]]! )
(]]) *
$str]]* @
)]]@ A
;]]A B
var__ 
integration__ 
=__ 
await__ 
_context__  (
.__( )
Integrations__) 5
.`` 
FirstOrDefaultAsync``  
(``  !
i``! "
=>``# %
i``& '
.``' (
Provider``( 0
==``1 3
repo``4 8
.``8 9
Provider``9 A
&&``B D
i``E F
.``F G
OrgId``G L
==``M O
repo``P T
.``T U
OrgId``U Z
)``Z [
;``[ \
ifbb 

(bb 
integrationbb 
==bb 
nullbb 
)bb  
returncc 

BadRequestcc 
(cc 
$strcc ?
)cc? @
;cc@ A
awaitee 
_serviceee 
.ee &
SyncPullRequestsFromGitHubee 1
(ee1 2
repoIdee2 8
,ee8 9
integrationee: E
.eeE F
ConfigeeF L
)eeL M
;eeM N
returngg 
Okgg 
(gg 
$strgg 
)gg 
;gg  
}hh 
[ll 	
HttpPutll	 
(ll 
$strll 
)ll 
]ll 
publicmm 
asyncmm 
Taskmm 
<mm 
IActionResultmm '
>mm' (
UpdatePRmm) 1
(mm1 2
intmm2 5
idmm6 8
,mm8 9
[mm: ;
FromBodymm; C
]mmC D
PullRequestmmE P
bodymmQ U
)mmU V
{nn 	
varoo 
proo 
=oo 
awaitoo 
_contextoo #
.oo# $
PullRequestsoo$ 0
.oo0 1
	FindAsyncoo1 :
(oo: ;
idoo; =
)oo= >
;oo> ?
ifpp 
(pp 
prpp 
==pp 
nullpp 
)pp 
returnpp "
NotFoundpp# +
(pp+ ,
$strpp, D
)ppD E
;ppE F
prrr 
.rr 
Titlerr 
=rr 
bodyrr 
.rr 
Titlerr !
??rr" $
prrr% '
.rr' (
Titlerr( -
;rr- .
prss 
.ss 
Statusss 
=ss 
bodyss 
.ss 
Statusss #
??ss$ &
prss' )
.ss) *
Statusss* 0
;ss0 1
prtt 
.tt 
AuthorIdtt 
=tt 
bodytt 
.tt 
AuthorIdtt '
!=tt( *
defaulttt+ 2
?tt3 4
bodytt5 9
.tt9 :
AuthorIdtt: B
:ttC D
prttE G
.ttG H
AuthorIdttH P
;ttP Q
_contextvv 
.vv 
PullRequestsvv !
.vv! "
Updatevv" (
(vv( )
prvv) +
)vv+ ,
;vv, -
awaitww 
_contextww 
.ww 
SaveChangesAsyncww +
(ww+ ,
)ww, -
;ww- .
returnyy 
Okyy 
(yy 
pryy 
)yy 
;yy 
}zz 	
[}} 	
HttpPut}}	 
(}} 
$str}} 
)}} 
]}}  
public~~ 
async~~ 
Task~~ 
<~~ 
IActionResult~~ '
>~~' (
UpdatePRStatus~~) 7
(~~7 8
int~~8 ;
id~~< >
,~~> ?
[~~@ A
FromBody~~A I
]~~I J
string~~K Q
	newStatus~~R [
)~~[ \
{ 	
var
ÄÄ 
pr
ÄÄ 
=
ÄÄ 
await
ÄÄ 
_context
ÄÄ #
.
ÄÄ# $
PullRequests
ÄÄ$ 0
.
ÄÄ0 1
	FindAsync
ÄÄ1 :
(
ÄÄ: ;
id
ÄÄ; =
)
ÄÄ= >
;
ÄÄ> ?
if
ÅÅ 
(
ÅÅ 
pr
ÅÅ 
==
ÅÅ 
null
ÅÅ 
)
ÅÅ 
return
ÅÅ "
NotFound
ÅÅ# +
(
ÅÅ+ ,
$str
ÅÅ, D
)
ÅÅD E
;
ÅÅE F
pr
ÉÉ 
.
ÉÉ 
Status
ÉÉ 
=
ÉÉ 
	newStatus
ÉÉ !
;
ÉÉ! "
_context
ÑÑ 
.
ÑÑ 
PullRequests
ÑÑ !
.
ÑÑ! "
Update
ÑÑ" (
(
ÑÑ( )
pr
ÑÑ) +
)
ÑÑ+ ,
;
ÑÑ, -
await
ÖÖ 
_context
ÖÖ 
.
ÖÖ 
SaveChangesAsync
ÖÖ +
(
ÖÖ+ ,
)
ÖÖ, -
;
ÖÖ- .
return
áá 
Ok
áá 
(
áá 
pr
áá 
)
áá 
;
áá 
}
àà 	
[
ãã 	

HttpDelete
ãã	 
(
ãã 
$str
ãã 
)
ãã 
]
ãã 
public
åå 
async
åå 
Task
åå 
<
åå 
IActionResult
åå '
>
åå' (
DeletePR
åå) 1
(
åå1 2
int
åå2 5
id
åå6 8
)
åå8 9
{
çç 	
var
éé 
pr
éé 
=
éé 
await
éé 
_context
éé #
.
éé# $
PullRequests
éé$ 0
.
éé0 1
	FindAsync
éé1 :
(
éé: ;
id
éé; =
)
éé= >
;
éé> ?
if
èè 
(
èè 
pr
èè 
==
èè 
null
èè 
)
èè 
return
èè "
NotFound
èè# +
(
èè+ ,
$str
èè, D
)
èèD E
;
èèE F
_context
ëë 
.
ëë 
PullRequests
ëë !
.
ëë! "
Remove
ëë" (
(
ëë( )
pr
ëë) +
)
ëë+ ,
;
ëë, -
await
íí 
_context
íí 
.
íí 
SaveChangesAsync
íí +
(
íí+ ,
)
íí, -
;
íí- .
return
îî 
Ok
îî 
(
îî 
new
îî 
{
îî 
message
îî #
=
îî$ %
$str
îî& <
}
îî= >
)
îî> ?
;
îî? @
}
ïï 	
}
ññ 
}óó œ
zC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Controllers\PRReviewController.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Controllers# .
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
PRReviewController #
:$ %
ControllerBase& 4
{		 
private

 
readonly

 
PRReviewService

 (
_reviewService

) 7
;

7 8
public 
PRReviewController !
(! "
PRReviewService" 1
reviewService2 ?
)? @
{ 	
_reviewService 
= 
reviewService *
;* +
} 	
[ 	
HttpPost	 
( 
$str 
) 
]  
public 
async 
Task 
< 
IActionResult '
>' (
Run) ,
(, -
int- 0
prId1 5
)5 6
{ 	
await 
_reviewService  
.  !
ReviewPR! )
() *
prId* .
). /
;/ 0
return 
Ok 
( 
$str 4
)4 5
;5 6
} 	
} 
} ∂
xC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Controllers\PRFileController.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Controllers# .
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public		 

class		 
PRFileController		 !
:		" #
ControllerBase		$ 2
{

 
private 
readonly 
AppDbContext !
_ctx" &
;& '
private 
readonly 
PRFileSyncService *
_sync+ 0
;0 1
public 
PRFileController 
(  
PRFileSyncService  1
sync2 6
,6 7
AppDbContext7 C
ctxD G
)G H
{ 	
_sync 
= 
sync 
; 
_ctx 
= 
ctx 
; 
} 	
[ 	
HttpPost	 
( 
$str 
)  
]  !
public 
async 
Task 
< 
IActionResult '
>' (
SyncPRFiles) 4
(4 5
int5 8
prId9 =
)= >
{ 	
await 
_sync 
. 
SyncPRFiles #
(# $
prId$ (
)( )
;) *
return 
Ok 
( 
$str '
)' (
;( )
} 	
[ 	
HttpGet	 
( 
$str  
)  !
]! "
public 
async 
Task 
< 
IActionResult 
>  
GetFiles! )
() *
int* -
prId. 2
)2 3
{ 
var 
files 
= 
await 
_ctx 
. 
PRFiles "
. 	
Where	 
( 
x 
=> 
x 
. 
PrId 
== 
prId "
)" #
.   	
ToListAsync  	 
(   
)   
;   
return"" 

Ok"" 
("" 
files"" 
)"" 
;"" 
}## 
}%% 
}&& òñ
~C:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Controllers\OrganizationController.cs
	namespace 	$
GitHubIntegrationBackend
 "
." #
Controllers# .
{ 
[ 
Route 

(
 
$str 
) 
] 
[		 
ApiController		 
]		 
public

 

class

 "
OrganizationController

 '
:

( )
ControllerBase

* 8
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public "
OrganizationController %
(% &
AppDbContext& 2
context3 :
): ;
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Organization3 ?
>? @
>@ A
>A B
GetOrganizationsC S
(S T
)T U
{ 	
return 
await 
_context !
.! "
Organizations" /
./ 0
ToListAsync0 ;
(; <
)< =
;= >
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
Organization' 3
>3 4
>4 5
GetOrganization6 E
(E F
intF I
idJ L
)L M
{ 	
var 
org 
= 
await 
_context $
.$ %
Organizations% 2
.2 3
	FindAsync3 <
(< =
id= ?
)? @
;@ A
if   
(   
org   
==   
null   
)   
return!! 
NotFound!! 
(!!  
new!!  #
{!!$ %
message!!& -
=!!. /
$str!!0 H
}!!I J
)!!J K
;!!K L
return## 
org## 
;## 
}$$ 	
['' 	
HttpPost''	 
]'' 
public(( 
async(( 
Task(( 
<(( 
ActionResult(( &
<((& '
Organization((' 3
>((3 4
>((4 5
CreateOrganization((6 H
(((H I
Organization((I U
organization((V b
)((b c
{)) 	
_context** 
.** 
Organizations** "
.**" #
Add**# &
(**& '
organization**' 3
)**3 4
;**4 5
await++ 
_context++ 
.++ 
SaveChangesAsync++ +
(+++ ,
)++, -
;++- .
return-- 
CreatedAtAction-- "
(--" #
nameof--# )
(--) *
GetOrganization--* 9
)--9 :
,--: ;
new--< ?
{--@ A
id--B D
=--E F
organization--G S
.--S T
Id--T V
}--W X
,--X Y
organization--Z f
)--f g
;--g h
}.. 	
[11 	
HttpPut11	 
(11 
$str11 
)11 
]11 
public22 
async22 
Task22 
<22 
IActionResult22 '
>22' (
UpdateOrganization22) ;
(22; <
int22< ?
id22@ B
,22B C
Organization22D P
updatedOrganization22Q d
)22d e
{33 	
if44 
(44 
id44 
!=44 
updatedOrganization44 )
.44) *
Id44* ,
)44, -
return55 

BadRequest55 !
(55! "
new55" %
{55& '
message55( /
=550 1
$str552 ?
}55@ A
)55A B
;55B C
_context77 
.77 
Entry77 
(77 
updatedOrganization77 .
)77. /
.77/ 0
State770 5
=776 7
EntityState778 C
.77C D
Modified77D L
;77L M
try99 
{:: 
await;; 
_context;; 
.;; 
SaveChangesAsync;; /
(;;/ 0
);;0 1
;;;1 2
}<< 
catch== 
(== (
DbUpdateConcurrencyException== /
)==/ 0
{>> 
if?? 
(?? 
!?? 
_context?? 
.?? 
Organizations?? +
.??+ ,
Any??, /
(??/ 0
e??0 1
=>??2 4
e??5 6
.??6 7
Id??7 9
==??: <
id??= ?
)??? @
)??@ A
return@@ 
NotFound@@ #
(@@# $
new@@$ '
{@@( )
message@@* 1
=@@2 3
$str@@4 L
}@@M N
)@@N O
;@@O P
elseAA 
throwBB 
;BB 
}CC 
returnEE 
	NoContentEE 
(EE 
)EE 
;EE 
}FF 	
[II 	

HttpDeleteII	 
(II 
$strII 
)II 
]II 
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
IActionResultJJ '
>JJ' (
DeleteOrganizationJJ) ;
(JJ; <
intJJ< ?
idJJ@ B
)JJB C
{KK 	
varLL 
orgLL 
=LL 
awaitLL 
_contextLL $
.LL$ %
OrganizationsLL% 2
.LL2 3
	FindAsyncLL3 <
(LL< =
idLL= ?
)LL? @
;LL@ A
ifMM 
(MM 
orgMM 
==MM 
nullMM 
)MM 
returnNN 
NotFoundNN 
(NN  
newNN  #
{NN$ %
messageNN& -
=NN. /
$strNN0 H
}NNI J
)NNJ K
;NNK L
_contextPP 
.PP 
OrganizationsPP "
.PP" #
RemovePP# )
(PP) *
orgPP* -
)PP- .
;PP. /
awaitQQ 
_contextQQ 
.QQ 
SaveChangesAsyncQQ +
(QQ+ ,
)QQ, -
;QQ- .
returnSS 
OkSS 
(SS 
newSS 
{SS 
messageSS #
=SS$ %
$strSS& I
}SSJ K
)SSK L
;SSL M
}TT 	
[VV 
HttpPostVV 
(VV 
$strVV '
)VV' (
]VV( )
publicWW 
asyncWW 
TaskWW 
<WW 
IActionResultWW 
>WW  &
UploadOrganizationSettingsWW! ;
(WW; <
intXX 
idXX 

,XX
 
	IFormFileYY 
fileYY 
,YY 
[ZZ 
FromFormZZ 
]ZZ 
longZZ 
guidelineIdZZ 
)[[ 
{\\ 
try]] 
{^^ 
var__ 
organization__ 
=__ 
await__  
_context__! )
.__) *
Organizations__* 7
.__7 8
	FindAsync__8 A
(__A B
id__B D
)__D E
;__E F
if`` 

(`` 
organization`` 
==`` 
null``  
)``  !
returnaa 
NotFoundaa 
(aa 
newaa 
{aa  !
messageaa" )
=aa* +
$straa, D
}aaE F
)aaF G
;aaG H
ifcc 

(cc 
filecc 
==cc 
nullcc 
||cc 
filecc  
.cc  !
Lengthcc! '
==cc( *
$numcc+ ,
)cc, -
returndd 

BadRequestdd 
(dd 
newdd !
{dd" #
messagedd$ +
=dd, -
$strdd. @
}ddA B
)ddB C
;ddC D
ifff 

(ff 
fileff 
.ff 
Lengthff 
>ff 
$numff 
*ff 
$numff #
*ff$ %
$numff& *
)ff* +
returngg 

BadRequestgg 
(gg 
newgg !
{gg" #
messagegg$ +
=gg, -
$strgg. L
}ggM N
)ggN O
;ggO P
varii 
allowedExtensionsii 
=ii 
newii  #
[ii# $
]ii$ %
{ii& '
$strii( .
,ii. /
$strii0 6
,ii6 7
$strii8 ?
,ii? @
$striiA G
}iiH I
;iiI J
varjj 
extjj 
=jj 
Pathjj 
.jj 
GetExtensionjj #
(jj# $
filejj$ (
.jj( )
FileNamejj) 1
)jj1 2
.jj2 3
ToLowerjj3 :
(jj: ;
)jj; <
;jj< =
ifkk 

(kk 
!kk 
allowedExtensionskk 
.kk 
Containskk '
(kk' (
extkk( +
)kk+ ,
)kk, -
returnll 

BadRequestll 
(ll 
newll !
{ll" #
messagell$ +
=ll, -
$strll. _
}ll` a
)lla b
;llb c
usingnn 
varnn 
memoryStreamnn 
=nn  
newnn! $
MemoryStreamnn% 1
(nn1 2
)nn2 3
;nn3 4
awaitoo 
fileoo 
.oo 
CopyToAsyncoo 
(oo 
memoryStreamoo +
)oo+ ,
;oo, -
varpp 

base64Datapp 
=pp 
Convertpp  
.pp  !
ToBase64Stringpp! /
(pp/ 0
memoryStreampp0 <
.pp< =
ToArraypp= D
(ppD E
)ppE F
)ppF G
;ppG H
varss 
guidelineEntryss 
=ss 
newss  
{tt 	
iduu 
=uu 
guidelineIduu 
,uu 
fileNamevv 
=vv 
filevv 
.vv 
FileNamevv $
,vv$ %
fileTypeww 
=ww 
extww 
,ww 
fileContentxx 
=xx 

base64Dataxx $
,xx$ %
fileSizeyy 
=yy 
fileyy 
.yy 
Lengthyy "
,yy" #

uploadedAtzz 
=zz 
DateTimezz !
.zz! "
UtcNowzz" (
.zz( )
ToStringzz) 1
(zz1 2
$strzz2 H
)zzH I
}{{ 	
;{{	 

List}} 
<}} 
object}} 
>}} 
guidelineList}} "
=}}# $
new}}% (
(}}( )
)}}) *
;}}* +
if 

( 
! 
string 
. 
IsNullOrWhiteSpace &
(& '
organization' 3
.3 4
Settings4 <
)< =
)= >
{
ÄÄ 	
try
ÅÅ 
{
ÇÇ 
var
ÉÉ 
settingsJson
ÉÉ  
=
ÉÉ! "
JsonSerializer
ÉÉ# 1
.
ÉÉ1 2
Deserialize
ÉÉ2 =
<
ÉÉ= >
JsonElement
ÉÉ> I
>
ÉÉI J
(
ÉÉJ K
organization
ÉÉK W
.
ÉÉW X
Settings
ÉÉX `
)
ÉÉ` a
;
ÉÉa b
if
ÖÖ 
(
ÖÖ 
settingsJson
ÖÖ  
.
ÖÖ  !
TryGetProperty
ÖÖ! /
(
ÖÖ/ 0
$str
ÖÖ0 <
,
ÖÖ< =
out
ÖÖ> A
var
ÖÖB E
gNode
ÖÖF K
)
ÖÖK L
)
ÖÖL M
{
ÜÜ 
guidelineList
áá !
=
áá" #
JsonSerializer
áá$ 2
.
áá2 3
Deserialize
áá3 >
<
áá> ?
List
áá? C
<
ááC D
object
ááD J
>
ááJ K
>
ááK L
(
ááL M
gNode
ááM R
.
ááR S
ToString
ááS [
(
áá[ \
)
áá\ ]
)
áá] ^
;
áá^ _
}
àà 
}
ââ 
catch
ää 
{
ää 
}
ää 
}
ãã 	
guidelineList
çç 
.
çç 
Add
çç 
(
çç 
guidelineEntry
çç (
)
çç( )
;
çç) *
var
èè 
updatedSettings
èè 
=
èè 
new
èè !
{
êê 	

guidelines
ëë 
=
ëë 
guidelineList
ëë &
,
ëë& '
lastUpdated
íí 
=
íí 
DateTime
íí "
.
íí" #
UtcNow
íí# )
.
íí) *
ToString
íí* 2
(
íí2 3
$str
íí3 I
)
ííI J
}
ìì 	
;
ìì	 

organization
ïï 
.
ïï 
Settings
ïï 
=
ïï 
JsonSerializer
ïï  .
.
ïï. /
	Serialize
ïï/ 8
(
ïï8 9
updatedSettings
ïï9 H
)
ïïH I
;
ïïI J
await
ññ 
_context
ññ 
.
ññ 
SaveChangesAsync
ññ '
(
ññ' (
)
ññ( )
;
ññ) *
return
òò 
Ok
òò 
(
òò 
new
òò 
{
ôô 	
message
öö 
=
öö 
$str
öö 2
,
öö2 3
	guideline
õõ 
=
õõ 
guidelineEntry
õõ &
}
úú 	
)
úú	 

;
úú
 
}
ùù 
catch
ûû 	
(
ûû
 
	Exception
ûû 
ex
ûû 
)
ûû 
{
üü 
return
†† 

StatusCode
†† 
(
†† 
$num
†† 
,
†† 
new
†† "
{
††# $
message
††% ,
=
††- .
ex
††/ 1
.
††1 2
Message
††2 9
}
††: ;
)
††; <
;
††< =
}
°° 
}¢¢ 
[
¶¶ 	
HttpPut
¶¶	 
(
¶¶ 
$str
¶¶  
)
¶¶  !
]
¶¶! "
publicßß 
async
ßß 
Task
ßß 
<
ßß 
IActionResult
ßß 
>
ßß  (
UpdateOrganizationSettings
ßß! ;
(
ßß; <
int
ßß< ?
id
ßß@ B
,
ßßB C
[
ßßD E
FromBody
ßßE M
]
ßßM N
JsonElement
ßßO Z
body
ßß[ _
)
ßß_ `
{®® 
var
©© 
org
©© 
=
©© 
await
©© 
_context
©© 
.
©© 
Organizations
©© *
.
©©* +
	FindAsync
©©+ 4
(
©©4 5
id
©©5 7
)
©©7 8
;
©©8 9
if
™™ 
(
™™ 
org
™™ 
==
™™ 
null
™™ 
)
™™ 
return
´´ 
NotFound
´´ 
(
´´ 
$str
´´ 0
)
´´0 1
;
´´1 2
List
≠≠ 
<
≠≠ 	
object
≠≠	 
>
≠≠ 
guidelineList
≠≠ 
=
≠≠  
new
≠≠! $
(
≠≠$ %
)
≠≠% &
;
≠≠& '
if
ØØ 
(
ØØ 
body
ØØ 
.
ØØ 
TryGetProperty
ØØ 
(
ØØ 
$str
ØØ (
,
ØØ( )
out
ØØ* -
JsonElement
ØØ. 9
guidelinesProp
ØØ: H
)
ØØH I
)
ØØI J
{
∞∞ 
guidelineList
±± 
=
±± 
JsonSerializer
±± &
.
±±& '
Deserialize
±±' 2
<
±±2 3
List
±±3 7
<
±±7 8
object
±±8 >
>
±±> ?
>
±±? @
(
±±@ A
guidelinesProp
±±A O
.
±±O P
ToString
±±P X
(
±±X Y
)
±±Y Z
)
±±Z [
;
±±[ \
}
≤≤ 
var
¥¥ 
updated
¥¥ 
=
¥¥ 
new
¥¥ 
{
µµ 

guidelines
∂∂ 
=
∂∂ 
guidelineList
∂∂ "
,
∂∂" #
lastUpdated
∑∑ 
=
∑∑ 
DateTime
∑∑ 
.
∑∑ 
UtcNow
∑∑ %
.
∑∑% &
ToString
∑∑& .
(
∑∑. /
$str
∑∑/ E
)
∑∑E F
}
∏∏ 
;
∏∏ 
org
∫∫ 
.
∫∫ 
Settings
∫∫ 
=
∫∫ 
JsonSerializer
∫∫ !
.
∫∫! "
	Serialize
∫∫" +
(
∫∫+ ,
updated
∫∫, 3
)
∫∫3 4
;
∫∫4 5
await
ªª 	
_context
ªª
 
.
ªª 
SaveChangesAsync
ªª #
(
ªª# $
)
ªª$ %
;
ªª% &
return
ΩΩ 

Ok
ΩΩ 
(
ΩΩ 
org
ΩΩ 
)
ΩΩ 
;
ΩΩ 
}ææ 
[
¬¬ 
HttpGet
¬¬ 
(
¬¬ 
$str
¬¬ %
)
¬¬% &
]
¬¬& '
public√√ 
async
√√ 
Task
√√ 
<
√√ 
IActionResult
√√ 
>
√√  !
GetUploadedSettings
√√! 4
(
√√4 5
int
√√5 8
id
√√9 ;
)
√√; <
{ƒƒ 
var
≈≈ 
organization
≈≈ 
=
≈≈ 
await
≈≈ 
_context
≈≈ %
.
≈≈% &
Organizations
≈≈& 3
.
≈≈3 4
	FindAsync
≈≈4 =
(
≈≈= >
id
≈≈> @
)
≈≈@ A
;
≈≈A B
if
∆∆ 
(
∆∆ 
organization
∆∆ 
==
∆∆ 
null
∆∆ 
)
∆∆ 
return
«« 
NotFound
«« 
(
«« 
new
«« 
{
«« 
message
«« %
=
««& '
$str
««( @
}
««A B
)
««B C
;
««C D
if
…… 
(
…… 
string
…… 
.
……  
IsNullOrWhiteSpace
…… !
(
……! "
organization
……" .
.
……. /
Settings
……/ 7
)
……7 8
)
……8 9
return
   
NotFound
   
(
   
new
   
{
   
message
   %
=
  & '
$str
  ( D
}
  E F
)
  F G
;
  G H
try
ÃÃ 
{
ÕÕ 
var
ŒŒ 
settings
ŒŒ 
=
ŒŒ 
JsonSerializer
ŒŒ %
.
ŒŒ% &
Deserialize
ŒŒ& 1
<
ŒŒ1 2
object
ŒŒ2 8
>
ŒŒ8 9
(
ŒŒ9 :
organization
ŒŒ: F
.
ŒŒF G
Settings
ŒŒG O
)
ŒŒO P
;
ŒŒP Q
return
–– 
Ok
–– 
(
–– 
new
–– 
{
—— 	
message
““ 
=
““ 
$str
““ B
,
““B C
settings
”” 
}
‘‘ 	
)
‘‘	 

;
‘‘
 
}
’’ 
catch
÷÷ 	
(
÷÷
 
	Exception
÷÷ 
ex
÷÷ 
)
÷÷ 
{
◊◊ 
return
ÿÿ 

StatusCode
ÿÿ 
(
ÿÿ 
$num
ÿÿ 
,
ÿÿ 
new
ÿÿ "
{
ÿÿ# $
message
ÿÿ% ,
=
ÿÿ- .
$str
ÿÿ/ G
,
ÿÿG H
error
ÿÿI N
=
ÿÿO P
ex
ÿÿQ S
.
ÿÿS T
Message
ÿÿT [
}
ÿÿ\ ]
)
ÿÿ] ^
;
ÿÿ^ _
}
ŸŸ 
}⁄⁄ 
}
›› 
}ﬁﬁ ˜ 
}C:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Controllers\IntegrationController.cs
	namespace		 	$
GitHubIntegrationBackend		
 "
.		" #
Controllers		# .
{

 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class !
IntegrationController &
:' (
ControllerBase) 7
{ 
private 
readonly 
AppDbContext %
_db& )
;) *
public !
IntegrationController $
($ %
AppDbContext% 1
db2 4
)4 5
=>6 8
_db9 <
== >
db? A
;A B
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
	GetForOrg) 2
(2 3
int3 6
orgId7 <
)< =
{ 	
var 
list 
= 
await 
_db  
.  !
Integrations! -
.- .
Where. 3
(3 4
i4 5
=>6 8
i9 :
.: ;
OrgId; @
==A C
orgIdD I
)I J
.J K
ToListAsyncK V
(V W
)W X
;X Y
return 
Ok 
( 
list 
) 
; 
} 	
[ 	

HttpDelete	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
Delete) /
(/ 0
int0 3
id4 6
)6 7
{ 	
var 
ent 
= 
await 
_db 
.  
Integrations  ,
., -
	FindAsync- 6
(6 7
id7 9
)9 :
;: ;
if 
( 
ent 
== 
null 
) 
return #
NotFound$ ,
(, -
)- .
;. /
_db 
. 
Integrations 
. 
Remove #
(# $
ent$ '
)' (
;( )
await 
_db 
. 
SaveChangesAsync &
(& '
)' (
;( )
return   
	NoContent   
(   
)   
;   
}!! 	
[## 	
HttpPost##	 
(## 
$str## &
)##& '
]##' (
public$$ 
async$$ 
Task$$ 
<$$ 
IActionResult$$ '
>$$' (
UpdateConfig$$) 5
($$5 6
int$$6 9
id$$: <
,$$< =
[$$> ?
FromBody$$? G
]$$G H
object$$I O
config$$P V
)$$V W
{%% 	
var&& 
ent&& 
=&& 
await&& 
_db&& 
.&&  
Integrations&&  ,
.&&, -
	FindAsync&&- 6
(&&6 7
id&&7 9
)&&9 :
;&&: ;
if'' 
('' 
ent'' 
=='' 
null'' 
)'' 
return'' #
NotFound''$ ,
('', -
)''- .
;''. /
ent(( 
.(( 
Config(( 
=(( 
JsonSerializer(( '
.((' (
	Serialize((( 1
(((1 2
config((2 8
)((8 9
;((9 :
_db)) 
.)) 
Integrations)) 
.)) 
Update)) #
())# $
ent))$ '
)))' (
;))( )
await** 
_db** 
.** 
SaveChangesAsync** &
(**& '
)**' (
;**( )
return++ 
Ok++ 
(++ 
ent++ 
)++ 
;++ 
},, 	
}-- 
}.. Óg
xC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Controllers\GitHubController.cs
	namespace⁄⁄ 	&
GitHubIntegrationBackend
⁄⁄
 "
.
⁄⁄" #
Controllers
⁄⁄# .
{€€ 
[
‹‹ 
ApiController
‹‹ 
]
‹‹ 
[
›› 
Route
›› 

(
››
 
$str
›› 
)
›› 
]
›› 
public
ﬁﬁ 

class
ﬁﬁ 
GitHubController
ﬁﬁ !
:
ﬁﬁ" #
ControllerBase
ﬁﬁ$ 2
{
ﬂﬂ 
private
‡‡ 
readonly
‡‡ 
IConfiguration
‡‡ '
_config
‡‡( /
;
‡‡/ 0
private
·· 
readonly
·· 
GitHubService
·· &
_gitHubService
··' 5
;
··5 6
private
‚‚ 
readonly
‚‚ 
AppDbContext
‚‚ %
_db
‚‚& )
;
‚‚) *
private
„„ 
readonly
„„ 
ILogger
„„  
<
„„  !
GitHubController
„„! 1
>
„„1 2
_logger
„„3 :
;
„„: ;
public
ÂÂ 
GitHubController
ÂÂ 
(
ÂÂ  
IConfiguration
ÂÂ  .
config
ÂÂ/ 5
,
ÂÂ5 6
GitHubService
ÂÂ7 D
gitHubService
ÂÂE R
,
ÂÂR S
AppDbContext
ÂÂT `
db
ÂÂa c
,
ÂÂc d
ILogger
ÂÂe l
<
ÂÂl m
GitHubController
ÂÂm }
>
ÂÂ} ~
loggerÂÂ Ö
)ÂÂÖ Ü
{
ÊÊ 	
_config
ÁÁ 
=
ÁÁ 
config
ÁÁ 
;
ÁÁ 
_gitHubService
ËË 
=
ËË 
gitHubService
ËË *
;
ËË* +
_db
ÈÈ 
=
ÈÈ 
db
ÈÈ 
;
ÈÈ 
_logger
ÍÍ 
=
ÍÍ 
logger
ÍÍ 
;
ÍÍ 
}
ÎÎ 	
[
ÓÓ 	
HttpGet
ÓÓ	 
(
ÓÓ 
$str
ÓÓ 
)
ÓÓ 
]
ÓÓ 
public
ÔÔ 
IActionResult
ÔÔ 
Login
ÔÔ "
(
ÔÔ" #
[
ÔÔ# $
	FromQuery
ÔÔ$ -
]
ÔÔ- .
int
ÔÔ/ 2
orgId
ÔÔ3 8
)
ÔÔ8 9
{
 	
if
ÒÒ 
(
ÒÒ 
orgId
ÒÒ 
<=
ÒÒ 
$num
ÒÒ 
)
ÒÒ 
return
ÚÚ 

BadRequest
ÚÚ !
(
ÚÚ! "
$str
ÚÚ" 2
)
ÚÚ2 3
;
ÚÚ3 4
var
ÙÙ 
clientId
ÙÙ 
=
ÙÙ 
_config
ÙÙ "
[
ÙÙ" #
$str
ÙÙ# 5
]
ÙÙ5 6
;
ÙÙ6 7
var
ıı 
redirectUri
ıı 
=
ıı 
_config
ıı %
[
ıı% &
$str
ıı& ;
]
ıı; <
;
ıı< =
var
¯¯ 
nonce
¯¯ 
=
¯¯ 
Guid
¯¯ 
.
¯¯ 
NewGuid
¯¯ $
(
¯¯$ %
)
¯¯% &
.
¯¯& '
ToString
¯¯' /
(
¯¯/ 0
$str
¯¯0 3
)
¯¯3 4
;
¯¯4 5
var
˘˘ 
state
˘˘ 
=
˘˘ 
$"
˘˘ 
$str
˘˘ 
{
˘˘ 
orgId
˘˘ $
}
˘˘$ %
$str
˘˘% &
{
˘˘& '
nonce
˘˘' ,
}
˘˘, -
"
˘˘- .
;
˘˘. /
var
˚˚ 
url
˚˚ 
=
˚˚ 
$"
¸¸ 
$str
¸¸ :
"
¸¸: ;
+
˝˝ 
$"
˝˝ 
$str
˝˝ 
{
˝˝  
clientId
˝˝  (
}
˝˝( )
"
˝˝) *
+
˛˛ 
$"
˛˛ 
$str
˛˛ "
{
˛˛" #
redirectUri
˛˛# .
}
˛˛. /
"
˛˛/ 0
+
ˇˇ 
$"
ˇˇ 
$str
ˇˇ /
"
ˇˇ/ 0
+
ÄÄ 
$"
ÄÄ 
$str
ÄÄ 
{
ÄÄ 
state
ÄÄ !
}
ÄÄ! "
"
ÄÄ" #
;
ÄÄ# $
return
ÇÇ 
Redirect
ÇÇ 
(
ÇÇ 
url
ÇÇ 
)
ÇÇ  
;
ÇÇ  !
}
ÉÉ 	
[
àà 	
HttpGet
àà	 
(
àà 
$str
àà 
)
àà 
]
àà 
public
ââ 
async
ââ 
Task
ââ 
<
ââ 
IActionResult
ââ '
>
ââ' (
Callback
ââ) 1
(
ââ1 2
[
ââ2 3
	FromQuery
ââ3 <
]
ââ< =
string
ââ> D
?
ââD E
code
ââF J
,
ââJ K
[
ââL M
	FromQuery
ââM V
]
ââV W
string
ââX ^
?
ââ^ _
state
ââ` e
)
ââe f
{
ää 	
if
ãã 
(
ãã 
string
ãã 
.
ãã 
IsNullOrEmpty
ãã $
(
ãã$ %
code
ãã% )
)
ãã) *
||
ãã+ -
string
ãã. 4
.
ãã4 5
IsNullOrEmpty
ãã5 B
(
ããB C
state
ããC H
)
ããH I
)
ããI J
return
åå 

BadRequest
åå !
(
åå! "
$str
åå" 9
)
åå9 :
;
åå: ;
int
èè 
orgId
èè 
=
èè 
$num
èè 
;
èè 
try
êê 
{
ëë 
var
íí 
parts
íí 
=
íí 
state
íí !
.
íí! "
Split
íí" '
(
íí' (
$char
íí( +
)
íí+ ,
;
íí, -
if
ìì 
(
ìì 
parts
ìì 
.
ìì 
Length
ìì  
>=
ìì! #
$num
ìì$ %
&&
ìì& (
parts
ìì) .
[
ìì. /
$num
ìì/ 0
]
ìì0 1
==
ìì2 4
$str
ìì5 :
)
ìì: ;
orgId
îî 
=
îî 
int
îî 
.
îî  
Parse
îî  %
(
îî% &
parts
îî& +
[
îî+ ,
$num
îî, -
]
îî- .
)
îî. /
;
îî/ 0
}
ïï 
catch
ññ 
{
óó 
return
òò 

BadRequest
òò !
(
òò! "
$str
òò" 1
)
òò1 2
;
òò2 3
}
ôô 
if
õõ 
(
õõ 
orgId
õõ 
<=
õõ 
$num
õõ 
)
õõ 
return
úú 

BadRequest
úú !
(
úú! "
$str
úú" /
)
úú/ 0
;
úú0 1
var
üü 
token
üü 
=
üü 
await
üü 
_gitHubService
üü ,
.
üü, -'
ExchangeCodeForTokenAsync
üü- F
(
üüF G
code
üüG K
)
üüK L
;
üüL M
if
†† 
(
†† 
string
†† 
.
†† 
IsNullOrEmpty
†† $
(
††$ %
token
††% *
)
††* +
)
††+ ,
return
°° 

BadRequest
°° !
(
°°! "
$str
°°" @
)
°°@ A
;
°°A B
var
§§ 
cfg
§§ 
=
§§ 
JsonSerializer
§§ $
.
§§$ %
	Serialize
§§% .
(
§§. /
new
§§/ 2
{
•• 
access_token
¶¶ 
=
¶¶ 
token
¶¶ $
,
¶¶$ %
installed_at
ßß 
=
ßß 
DateTime
ßß '
.
ßß' (
UtcNow
ßß( .
}
®® 
)
®® 
;
®® 
var
™™ 
integration
™™ 
=
™™ 
await
´´ 
_db
´´ 
.
´´ 
Integrations
´´ &
.
¨¨ !
FirstOrDefaultAsync
¨¨ (
(
¨¨( )
i
¨¨) *
=>
¨¨+ -
i
≠≠ 
.
≠≠ 
OrgId
≠≠ 
==
≠≠  "
orgId
≠≠# (
&&
≠≠) +
i
ÆÆ 
.
ÆÆ 
Provider
ÆÆ "
.
ÆÆ" #
ToLower
ÆÆ# *
(
ÆÆ* +
)
ÆÆ+ ,
==
ÆÆ- /
$str
ÆÆ0 8
)
ÆÆ8 9
;
ÆÆ9 :
if
∞∞ 
(
∞∞ 
integration
∞∞ 
==
∞∞ 
null
∞∞ #
)
∞∞# $
{
±± 
integration
≤≤ 
=
≤≤ 
new
≤≤ !
Integration
≤≤" -
{
≥≥ 
OrgId
¥¥ 
=
¥¥ 
orgId
¥¥ !
,
¥¥! "
Type
µµ 
=
µµ 
$str
µµ  
,
µµ  !
Provider
∂∂ 
=
∂∂ 
$str
∂∂ '
,
∂∂' (
Config
∑∑ 
=
∑∑ 
cfg
∑∑  
}
∏∏ 
;
∏∏ 
_db
ππ 
.
ππ 
Integrations
ππ  
.
ππ  !
Add
ππ! $
(
ππ$ %
integration
ππ% 0
)
ππ0 1
;
ππ1 2
}
∫∫ 
else
ªª 
{
ºº 
integration
ΩΩ 
.
ΩΩ 
Config
ΩΩ "
=
ΩΩ# $
cfg
ΩΩ% (
;
ΩΩ( )
_db
ææ 
.
ææ 
Integrations
ææ  
.
ææ  !
Update
ææ! '
(
ææ' (
integration
ææ( 3
)
ææ3 4
;
ææ4 5
}
øø 
await
¡¡ 
_db
¡¡ 
.
¡¡ 
SaveChangesAsync
¡¡ &
(
¡¡& '
)
¡¡' (
;
¡¡( )
var
ƒƒ 
redirectFrontend
ƒƒ  
=
ƒƒ! "
_config
≈≈ 
[
≈≈ 
$str
≈≈ 3
]
≈≈3 4
??
∆∆ 
$str
∆∆ E
;
∆∆E F
return
»» 
Redirect
»» 
(
»» 
$"
»» 
{
»» 
redirectFrontend
»» /
}
»»/ 0
$str
»»0 7
{
»»7 8
orgId
»»8 =
}
»»= >
"
»»> ?
)
»»? @
;
»»@ A
}
…… 	
[
ÀÀ 
HttpGet
ÀÀ 
(
ÀÀ 
$str
ÀÀ 
)
ÀÀ 
]
ÀÀ 
publicÃÃ 
async
ÃÃ 
Task
ÃÃ 
<
ÃÃ 
IActionResult
ÃÃ 
>
ÃÃ  
GetRepos
ÃÃ! )
(
ÃÃ) *
[
ÃÃ* +
	FromQuery
ÃÃ+ 4
]
ÃÃ4 5
int
ÃÃ6 9
orgId
ÃÃ: ?
)
ÃÃ? @
{ÕÕ 
if
ŒŒ 
(
ŒŒ 
orgId
ŒŒ 
<=
ŒŒ 
$num
ŒŒ 
)
ŒŒ 
return
œœ 

BadRequest
œœ 
(
œœ 
$str
œœ *
)
œœ* +
;
œœ+ ,
var
—— 
integration
—— 
=
—— 
await
—— 
_db
—— 
.
——  
Integrations
——  ,
.
““ 	!
FirstOrDefaultAsync
““	 
(
““ 
i
““ 
=>
““ !
i
““" #
.
““# $
OrgId
““$ )
==
““* ,
orgId
““- 2
&&
““3 5
i
““6 7
.
““7 8
Provider
““8 @
==
““A C
$str
““D L
)
““L M
;
““M N
if
‘‘ 
(
‘‘ 
integration
‘‘ 
==
‘‘ 
null
‘‘ 
)
‘‘ 
return
’’ 
NotFound
’’ 
(
’’ 
$str
’’ 6
)
’’6 7
;
’’7 8
var
◊◊ 
cfg
◊◊ 
=
◊◊ 
JsonSerializer
◊◊ 
.
◊◊ 
Deserialize
◊◊ (
<
◊◊( )

Dictionary
◊◊) 3
<
◊◊3 4
string
◊◊4 :
,
◊◊: ;
object
◊◊< B
>
◊◊B C
>
◊◊C D
(
◊◊D E
integration
◊◊E P
.
◊◊P Q
Config
◊◊Q W
)
◊◊W X
;
◊◊X Y
var
ÿÿ 
token
ÿÿ 
=
ÿÿ 
cfg
ÿÿ 
[
ÿÿ 
$str
ÿÿ "
]
ÿÿ" #
?
ÿÿ# $
.
ÿÿ$ %
ToString
ÿÿ% -
(
ÿÿ- .
)
ÿÿ. /
;
ÿÿ/ 0
if
⁄⁄ 
(
⁄⁄ 
string
⁄⁄ 
.
⁄⁄ 
IsNullOrEmpty
⁄⁄ 
(
⁄⁄ 
token
⁄⁄ "
)
⁄⁄" #
)
⁄⁄# $
return
€€ 

BadRequest
€€ 
(
€€ 
$str
€€ 2
)
€€2 3
;
€€3 4
var
›› 
(
›› 	
ok
››	 
,
›› 
body
›› 
,
›› 
status
›› 
)
›› 
=
›› 
await
›› "
_gitHubService
››# 1
.
››1 2
GetUserReposAsync
››2 C
(
››C D
token
››D I
)
››I J
;
››J K
if
ﬂﬂ 
(
ﬂﬂ 
!
ﬂﬂ 	
ok
ﬂﬂ	 
)
ﬂﬂ 
return
‡‡ 

StatusCode
‡‡ 
(
‡‡ 
status
‡‡  
,
‡‡  !
body
‡‡" &
)
‡‡& '
;
‡‡' (
try
‚‚ 
{
„„ 
var
‰‰ 
repos
‰‰ 
=
‰‰ 
JsonSerializer
‰‰ "
.
‰‰" #
Deserialize
‰‰# .
<
‰‰. /
List
‰‰/ 3
<
‰‰3 4
object
‰‰4 :
>
‰‰: ;
>
‰‰; <
(
‰‰< =
body
‰‰= A
)
‰‰A B
??
ÂÂ 
new
ÂÂ 
List
ÂÂ 
<
ÂÂ 
object
ÂÂ %
>
ÂÂ% &
(
ÂÂ& '
)
ÂÂ' (
;
ÂÂ( )
return
ÁÁ 
Ok
ÁÁ 
(
ÁÁ 
repos
ÁÁ 
)
ÁÁ 
;
ÁÁ 
}
ËË 
catch
ÈÈ 	
{
ÍÍ 
return
ÎÎ 
Ok
ÎÎ 
(
ÎÎ 
new
ÎÎ 
List
ÎÎ 
<
ÎÎ 
object
ÎÎ !
>
ÎÎ! "
(
ÎÎ" #
)
ÎÎ# $
)
ÎÎ$ %
;
ÎÎ% &
}
ÏÏ 
}ÌÌ 
}
ÒÒ 
}ÚÚ ≠!
~C:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Controllers\ContributorsController.cs
	namespace		 	$
GitHubIntegrationBackend		
 "
.		" #
Controllers		# .
{

 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class "
ContributorsController '
:( )
ControllerBase* 8
{ 
private 
readonly 
ContributorService +
_service, 4
;4 5
private 
readonly 
AppDbContext %
_context& .
;. /
public "
ContributorsController %
(% &
ContributorService& 8
service9 @
,@ A
AppDbContextB N
contextO V
)V W
{ 	
_service 
= 
service 
; 
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
( 
$str  
)  !
]! "
public 
async 
Task 
< 
IActionResult '
>' (!
GetContributorsByRepo) >
(> ?
int? B
repoIdC I
)I J
{ 	
var 
users 
= 
await 
_context &
.& '
Users' ,
. 
Where 
( 
u  
=>! #
u$ %
.% &
OrgId& +
==, .
_context/ 7
.7 8
Repositories8 D
.$ %
Where% *
(* +
r+ ,
=>- /
r0 1
.1 2
Id2 4
==5 7
repoId8 >
)> ?
.$ %
Select% +
(+ ,
r, -
=>. 0
r1 2
.2 3
OrgId3 8
)8 9
.  $ %
FirstOrDefault  % 3
(  3 4
)  4 5
)  5 6
.!! 
ToListAsync!! $
(!!$ %
)!!% &
;!!& '
return## 
Ok## 
(## 
users## 
)## 
;## 
}$$ 	
['' 	
HttpPost''	 
('' 
$str'' !
)''! "
]''" #
public(( 
async(( 
Task(( 
<(( 
IActionResult(( '
>((' (
SyncContributors(() 9
(((9 :
int((: =
repoId((> D
)((D E
{)) 	
var** 
repo** 
=** 
await** 
_context** %
.**% &
Repositories**& 2
.**2 3
	FindAsync**3 <
(**< =
repoId**= C
)**C D
;**D E
if++ 
(++ 
repo++ 
==++ 
null++ 
)++ 
return++ $
NotFound++% -
(++- .
$str++. D
)++D E
;++E F
var-- 
integration-- 
=-- 
await-- #
_context--$ ,
.--, -
Integrations--- 9
... 
FirstOrDefaultAsync.. $
(..$ %
i..% &
=>..' )
i..* +
...+ ,
Provider.., 4
==..5 7
repo..8 <
...< =
Provider..= E
&&..F H
i..I J
...J K
OrgId..K P
==..Q S
repo..T X
...X Y
OrgId..Y ^
)..^ _
;.._ `
if00 
(00 
integration00 
==00 
null00 #
)00# $
return11 

BadRequest11 !
(11! "
$str11" C
)11C D
;11D E
await33 
_service33 
.33 &
SyncContributorsFromGitHub33 5
(335 6
repoId336 <
,33< =
integration33> I
.33I J
Config33J P
)33P Q
;33Q R
return55 
Ok55 
(55 
$str55 8
)558 9
;559 :
}66 	
}77 
}88 ‘
vC:\Users\Lenovo\Desktop\Code Reviewer AI\CCR\Ctpl-Code-Reviewer\GitHubIntegrationBackend\Controllers\AuthController.cs
[ 
ApiController 
] 
[ 
Route 
( 
$str 
) 
] 
public 
class 
AuthController 
: 
ControllerBase ,
{ 
private 
static 
readonly 

Dictionary &
<& '
string' -
,- .
string/ 5
>5 6
Users7 <
== >
new? B
(B C
)C D
{ 
{		 	
$str		
 
,		 
$str		 '
}		( )
,		) *
{

 	
$str


 
,

 
$str

  )
}

* +
} 
; 
[ 
HttpPost 
( 
$str 
) 
] 
public 

IActionResult 
Login 
( 
[  
FromBody  (
]( )
LoginRequest* 6
req7 :
): ;
{ 
if 

( 
Users 
. 
TryGetValue 
( 
req !
.! "
Email" '
,' (
out) ,
var- 0
pwd1 4
)4 5
&&6 8
pwd9 <
=== ?
req@ C
.C D
PasswordD L
)L M
return 
Ok 
( 
new 
{ 
token !
=" #
Guid$ (
.( )
NewGuid) 0
(0 1
)1 2
.2 3
ToString3 ;
(; <
$str< ?
)? @
}A B
)B C
;C D
return 
Unauthorized 
( 
new 
{  !
message" )
=* +
$str, G
}H I
)I J
;J K
} 
} 
public 
class 
LoginRequest 
{ 
public 

string 
Email 
{ 
get 
; 
set "
;" #
}$ %
=& '
string( .
.. /
Empty/ 4
;4 5
public 

string 
Password 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
} 